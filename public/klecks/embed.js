!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){if(e=l.i?.[e]||e,!n)try{throw Error()}catch(r){var t=(""+r.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(!t)return a+e;n=t[0]}return new URL(a+e,n).toString()}function r(e){return e&&e.__esModule?e.default:e}var n,i,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="./",s={},u={},l=o.parcelRequire94c2;null==l&&((l=function(e){if(e in s)return s[e].exports;if(e in u){var t=u[e];delete u[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){u[e]=t},o.parcelRequire94c2=l);var c=l.register;c("1LaJZ",function(t,r){function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){r(e);return}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)})}}e(t.exports,"_",function(){return i})}),c("cx0mh",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}}),c("7h4XF",function(t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e(t.exports,"_",function(){return i})}),c("cL71g",function(t,r){e(t.exports,"_",function(){return i});var n=l("exh8t");function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){(0,n._)(e,t,r[t])})}return e}}),c("exh8t",function(t,r){e(t.exports,"_",function(){return n});function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}),c("4EWN2",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}}),c("2gUX3",function(t,r){function n(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var l=[s,u];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}e(t.exports,"__generator",function(){return n}),e(t.exports,"__values",function(){return i}),"function"==typeof SuppressedError&&SuppressedError}),c("ci8rB",function(e,r){e.exports=t("eHdqz")}),c("1mH1z",function(t,r){e(t.exports,"LS_LANGUAGE_KEY",function(){return h}),e(t.exports,"LANGUAGE_STRINGS",function(){return g}),e(t.exports,"LANG",function(){return m}),e(t.exports,"initLANG",function(){return v});var n=l("1LaJZ"),i=l("cx0mh"),o=l("7h4XF"),a=l("cL71g"),s=l("2gUX3"),u=l("fgfvl"),c=l("6l0gQ"),h="klecks-language",d=function(){"use strict";function e(){(0,i._)(this,e),this.listeners=[],this.data=(0,a._)({},u.english),this.code="en"}return(0,o._)(e,[{key:"setLanguage",value:function(e){return(0,n._)(function(){var t,r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if("en"!==e)return[3,1];return this.data=(0,a._)({},u.english),[3,3];case 1:return t=this,r=[{},u.english],[4,(0,u.loadLanguage)(e)];case 2:t.data=a._.apply(void 0,r.concat([n.sent()])),n.label=3;case 3:return this.code=e,document.documentElement.setAttribute("lang",e),this.listeners.forEach(function(e){e()}),[2]}})}).call(this)}},{key:"get",value:function(e){if(!(e in this.data))throw Error("translation code doesn't exist: "+e);return this.data[e]}},{key:"getLanguage",value:function(){var e=this;return u.languages.find(function(t){return t.code===e.code})}},{key:"getAutoLanguage",value:function(){var e=f(!1);return u.languages.find(function(t){return t.code===e})}},{key:"getCode",value:function(){return this.code}},{key:"subscribe",value:function(e){this.listeners.includes(e)||this.listeners.push(e)}},{key:"unsubscribe",value:function(e){for(var t=0;t<this.listeners.length;t++)if(e===this.listeners[t])return void this.listeners.splice(t,1)}}]),e}();function f(e){var t="en",r=[];if((navigator.languages?navigator.languages:[navigator.language]).forEach(function(e){var t=e.split("-");r.push(e),2===t.length&&r.push(t[0])}),e)try{var n=c.LocalStorage.getItem(h);n&&r.unshift(n)}catch(e){}for(var i=0;i<r.length&&"break"!==function(e){var n=r[e],i=u.languages.find(function(e){return e.code.toLowerCase()===n.toLowerCase()});if(i)return t=i.code,"break"}(i);i++);return t}var p=f(!0),g=new d,m=function(e,t){if(!t)return g.get(e);var r=g.get(e);return Object.keys(t).forEach(function(e){r=r.replace(`{${e}}`,t[e])}),r},v=function(){return g.setLanguage(p)}}),c("fgfvl",function(t,n){e(t.exports,"english",function(){return a}),e(t.exports,"languages",function(){return s}),e(t.exports,"loadLanguage",function(){return u});var i=l("1LaJZ"),o=l("2gUX3"),a=r(l("iQKsR")),s=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"es",name:"Español"},{code:"fi",name:"suomi"},{code:"fr",name:"Français"},{code:"hu",name:"Magyar"},{code:"id",name:"Bahasa Indonesia"},{code:"ja",name:"日本語"},{code:"jv",name:"Basa Jawa"},{code:"ko",name:"한국어"},{code:"lv",name:"Latviešu Valoda"},{code:"nl",name:"Nederlands"},{code:"pt-BR",name:"Português Brasil"},{code:"ru",name:"русский"},{code:"su",name:"Basa Sunda"},{code:"sv",name:"Svenska"},{code:"zh-CN",name:"简体中文"},{code:"zh-TW",name:"繁體中文"}],u=function(e){return(0,i._)(function(){return(0,o.__generator)(this,function(t){switch(t.label){case 0:if("en"!==e)return[3,1];return[2,a];case 1:if("de"!==e)return[3,3];return[4,l("8mlhh")];case 2:case 4:case 6:case 8:case 10:case 12:case 14:case 16:case 18:case 20:case 22:case 24:case 26:case 28:case 30:case 32:case 34:return[2,t.sent()];case 3:if("es"!==e)return[3,5];return[4,l("hLG03")];case 5:if("fi"!==e)return[3,7];return[4,l("kJrPi")];case 7:if("fr"!==e)return[3,9];return[4,l("bI71U")];case 9:if("hu"!==e)return[3,11];return[4,l("eICi1")];case 11:if("id"!==e)return[3,13];return[4,l("kqusB")];case 13:if("ja"!==e)return[3,15];return[4,l("57GX6")];case 15:if("jv"!==e)return[3,17];return[4,l("h75GH")];case 17:if("ko"!==e)return[3,19];return[4,l("55azR")];case 19:if("lv"!==e)return[3,21];return[4,l("fWO0c")];case 21:if("nl"!==e)return[3,23];return[4,l("4zES7")];case 23:if("pt-BR"!==e)return[3,25];return[4,l("7KXHm")];case 25:if("ru"!==e)return[3,27];return[4,l("aqoL6")];case 27:if("su"!==e)return[3,29];return[4,l("7TgKV")];case 29:if("sv"!==e)return[3,31];return[4,l("2HU4B")];case 31:if("zh-CN"!==e)return[3,33];return[4,l("lWIVr")];case 33:if("zh-TW"!==e)return[3,35];return[4,l("bGxAd")];case 35:throw Error("unknown language code")}})})()}}),c("iQKsR",function(e,t){e.exports=JSON.parse('{"switch-ui-left-right":"Switch left/right UI","toggle-show-tools":"Show/Hide Tools","scroll":"Scroll","donate":"Donate","home":"Home","modal-new-tab":"Open in new tab","tab-edit":"Edit","tab-file":"File","tool-brush":"Brush","tool-paint-bucket":"Paint Bucket","tool-gradient":"Gradient","tool-shape":"Shape","tool-text":"Text","tool-hand":"Hand Tool","tool-select":"Select Tool","tool-zoom":"Zoom","tool-more-tools":"More Tools","tool-more-tools-click-again":"Click again for more tools","undo":"Undo","redo":"Redo","brush-pen":"Pen","brush-blend":"Blend","brush-sketchy":"Sketchy","brush-pixel":"Pixel","brush-chemy":"Chemy","brush-smudge":"Smudge","brush-size":"Size","brush-blending":"Blending","brush-toggle-pressure":"Toggle Pressure Sensitivity","brush-pen-circle":"Circle","brush-pen-chalk":"Chalk","brush-pen-calligraphy":"Calligraphy","brush-pen-square":"Square","brush-sketchy-scale":"Scale","brush-pixel-dither":"Dither","brush-chemy-fill":"Fill","brush-chemy-stroke":"Stroke","brush-chemy-mirror-x":"Horizontal Symmetry","brush-chemy-mirror-y":"Vertical Symmetry","brush-chemy-gradient":"Gradient","brush-eraser-transparent-bg":"Transparent Background","stabilizer":"Stabilizer","stabilizer-title":"Stroke Stabilizer","eyedropper":"Eyedropper","secondary-color":"Secondary Color","manual-color-input":"Manual Color Input","mci-hex":"Hex","mci-copy":"Copy","modal-ok":"Ok","modal-cancel":"Cancel","modal-close":"Close","layers-active-layer":"Active Layer","layers-layer":"Layer","layers-copy":"copy","layers-blending":"Blending","layers-new":"New Layer","layers-remove":"Remove Layer","layers-duplicate":"Duplicate Layer","layers-merge":"Merge with layer below","layers-clear":"Clear layer","layers-merge-advanced":"Advanced merge","layers-merge-all":"Merge all","layers-rename":"Rename","layers-active-layer-visible":"Active layer is visible","layers-active-layer-hidden":"Active layer is hidden","layers-visibility-toggle":"Layer Visibility","layers-blend-normal":"normal","layers-blend-darken":"darken","layers-blend-multiply":"multiply","layers-blend-color-burn":"color burn","layers-blend-lighten":"lighten","layers-blend-screen":"screen","layers-blend-color-dodge":"color dodge","layers-blend-overlay":"overlay","layers-blend-soft-light":"soft light","layers-blend-hard-light":"hard light","layers-blend-difference":"difference","layers-blend-exclusion":"exclusion","layers-blend-hue":"hue","layers-blend-saturation":"saturation","layers-blend-color":"color","layers-blend-luminosity":"luminosity","layers-rename-title":"Rename Layer","layers-rename-name":"Name","layers-rename-clear":"Clear Name","layers-rename-sketch":"Sketch","layers-rename-colors":"Colors","layers-rename-shading":"Shading","layers-rename-lines":"Lines","layers-rename-effects":"Effects","layers-rename-foreground":"Foreground","layers-merge-modal-title":"Merge/Mix Layers","layers-merge-description":"Merges the selected layer with the one underneath. Select the mix mode:","file-no-autosave":"No autosave, no cloud storage","file-new":"New","file-import":"Import","file-save":"Save","file-format":"File Format","file-show-save-dialog":"Show save dialog","file-copy":"Copy","file-copy-title":"Copy To Clipboard","file-paste":"Paste","file-share":"Share","file-storage":"Browser Storage","file-storage-about":"About Browser Storage","file-storage-cant-access":"Can\'t access storage.","file-storage-empty":"Empty","file-storage-store":"Store","file-storage-open":"Open","file-storage-open-confirmation":"This image is already open in another tab. Open it here too?","file-storage-open-failed":"Failed to load.","file-storage-clear":"Clear","file-storage-clear-prompt":"Clear Browser Storage? Clearing can not be undone.","file-storage-storing":"Storing","file-storage-overwrite":"Overwrite","file-storage-overwrite-confirm":"Overwrite Browser Storage? Overwritten data will be permanently deleted.","file-storage-min-ago":"{x}min ago","file-storage-hours-ago":"{x}h ago","file-storage-days-ago":"{x}d ago","file-storage-month-ago":"> 1month ago","file-storage-restored":"Restored from Browser Storage","file-storage-stored":"Stored to Browser Storage","file-storage-failed":"Failed to store to Browser Storage","file-storage-failed-1":"Failed to store. Possible causes:","file-storage-failed-2":"Out of disk space","file-storage-failed-3":"Storage disabled in incognito tab","file-storage-failed-4":"Browser doesn\'t support storage","file-storage-failed-clear":"Failed to clear.","file-upload":"Upload","tab-recovery-recover-tabs":"Recover closed tabs","tab-recovery-explanation":"Recovery data is only kept for a little while. Save to ensure your work is not lost.","tab-recovery-total-quota-label":"Total:","tab-recovery-empty":"Nothing to recover.","tab-recovery-recover":"Recover","tab-recovery-delete":"Delete","tab-recovery-delete-confirmation":"Delete this recovery? Deletion can not be undone.","tab-recovery-failed-to-recover":"Failed to recover tab.","tab-recovery-recovered":"Tab recovered.","cleared-layer":"Cleared layer","cleared-selected-area":"Cleared selected area","filled":"Filled","filled-selected-area":"Filled selection","new-title":"New Image","new-current":"Current","new-fit":"Fit","new-oversize":"Oversize","new-square":"Square","new-landscape":"Landscape","new-portrait":"Portrait","new-screen":"Screen","new-video":"Video","new-din-paper":"DIN Paper","new-px":"px","new-ratio":"Ratio","upload-title":"Upload to Imgur","upload-link-notice":"Anyone with the link to your uploaded image will be able to view it.","upload-name":"Title","upload-title-untitled":"Untitled","upload-caption":"Caption","upload-submit":"Upload","upload-uploading":"Uploading...","upload-success":"Upload Successful","upload-failed":"Upload failed.","upload-delete":"To delete your image from Imgur visit:","cropcopy-title-copy":"Copy To Clipboard","cropcopy-title-crop":"Crop","cropcopy-mask":"Mask unselected","cropcopy-click-hold":"Right-click or press hold to copy.","cropcopy-btn-copy":"To Clipboard","cropcopy-copied":"Copied.","cropcopy-btn-crop":"Apply Crop","crop-drag-to-crop":"Drag to crop","filter-crop-extend":"Crop/Extend","filter-flip":"Flip","filter-perspective":"Perspective","filter-resize":"Resize","filter-rotate":"Rotate","filter-transform":"Transform","filter-bright-contrast":"Bright/Contrast","filter-curves":"Curves","filter-hue-sat":"Hue/Saturation","filter-invert":"Invert","filter-tilt-shift":"Tilt Shift","filter-to-alpha":"To Alpha","filter-triangle-blur":"Triangle Blur","filter-unsharp-mask":"Unsharp Mask","filter-crop-title":"Crop / Extend","filter-crop-description":"Crop or extend the image.","filter-crop-left":"Left","filter-crop-right":"Right","filter-crop-top":"Top","filter-crop-bottom":"Bottom","filter-crop-rule-thirds":"Rule of Thirds","filter-crop-fill":"Fill","filter-flip-title":"Flip","filter-flip-description":"Flips layer or whole image.","filter-flip-horizontal":"Horizontal","filter-flip-vertical":"Vertical","filter-flip-image":"Flip Image","filter-flip-layer":"Flip Layer","filter-perspective-title":"Perspective","filter-perspective-description":"Transforms the selected layer.","filter-resize-title":"Resize","filter-resize-description":"Resizes the image.","filter-rotate-title":"Rotate","filter-rotate-description":"Rotates the image.","filter-transform-empty":"Layer is empty.","filter-transform-empty-selection":"Layer is empty in selected area.","filter-transform-title":"Transform","filter-transform-description":"Transforms selected layer. Hold Shift for additional behavior.","filter-transform-rotation":"Rotation","filter-transform-flip":"Flip","filter-transform-center":"Center","filter-transform-constrain":"Constrain","filter-transform-snap":"Snap","filter-transform-snap-title":"Snap Rotation And Position","filter-bright-contrast-title":"Brightness / Contrast","filter-bright-contrast-description":"Change brightness and contrast for the selected layer.","filter-bright-contrast-brightness":"Brightness","filter-bright-contrast-contrast":"Contrast","filter-curves-title":"Curves","filter-curves-description":"Apply curves on the selected layer.","filter-curves-all":"All","filter-hue-sat-title":"Hue / Saturation","filter-hue-sat-description":"Change hue and saturation for the selected layer.","filter-hue-sat-hue":"Hue","filter-hue-sat-saturation":"Saturation","filter-applied":"applied","filter-tilt-shift-title":"Tilt Shift","filter-tilt-shift-description":"Applies tilt shift on the selected layer.","filter-tilt-shift-blur":"Blur Radius","filter-tilt-shift-gradient":"Gradient Radius","filter-to-alpha-title":"To Alpha","filter-to-alpha-description":"Generates alpha channel for selected layer from:","filter-to-alpha-inverted-lum":"Inverted Luminance","filter-to-alpha-lum":"Luminance","filter-to-alpha-replace":"Replace RGB","filter-triangle-blur-title":"Triangle Blur","filter-triangle-blur-description":"Applies triangle blur on the selected layer.","filter-unsharp-mask-title":"Unsharp Mask","filter-unsharp-mask-description":"Sharpens the selected layer by scaling pixels away from the average of their neighbors.","filter-unsharp-mask-strength":"Strength","filter-grid":"Grid","filter-grid-description":"Draws grid on selected layer.","filter-noise":"Noise","filter-noise-description":"Adds noise to selected layer.","filter-noise-scale":"Scale","filter-noise-alpha":"Alpha","filter-pattern":"Pattern","filter-pattern-description":"Generates pattern on selected layer. Drag the preview for further controls.","filter-distort":"Distort","filter-distort-description":"Distorts the selected layer.","filter-distort-phase":"Phase","filter-distort-stepsize":"Step Size","filter-distort-sync-xy":"Sync XY","filter-vanish-point":"Vanish Point","filter-vanish-point-title":"Vanishing Point","filter-vanish-point-description":"Adds vanishing point to selected layer. Drag preview to move.","filter-vanish-point-lines":"Lines","dropper-drop":"Drop to import","dropper-as-image":"As New Image","dropper-as-layer":"As Layer","import-opening":"Opening file...","import-title":"Import Image","import-too-large":"Image too large, will be downscaled.","import-btn-as-layer":"As Layer","import-btn-as-image":"As Image","import-as-layer-title":"Import Image as New Layer","import-as-layer-description":"Adjust the position of the imported image.","import-as-layer-limit-reached":"Layer limit reached. Image will be placed on existing layer.","import-as-layer-fit":"Fit","import-flatten":"Flatten image","import-unsupported-file":"Unsupported file type. See Help for supported types.","import-broken-file":"Couldn\'t load image. File might be corrupted.","import-psd-unsupported":"Unsupported features. PSD had to be flattened.","import-psd-limited-support":"PSD support is limited. Flattened will more likely look correct.","import-psd-too-large":"Image exceeds maximum dimensions of {x} x {x} pixels. Unable to import.","import-psd-size":"Image size","clipboard-read-fail":"Failed to read from clipboard.","clipboard-no-image":"No image found in clipboard.","hand-reset":"Reset","hand-fit":"Fit","hand-inertia-scrolling":"Inertia Scrolling","bucket-tolerance":"Tolerance","bucket-sample":"Sample","bucket-sample-title":"Which layers to sample color from","bucket-sample-all":"All","bucket-sample-active":"Active","bucket-sample-above":"Above","bucket-grow":"Grow","bucket-grow-title":"Grow filled area (in pixels)","bucket-contiguous":"Contiguous","bucket-contiguous-title":"Only fill connected areas","gradient-linear":"Linear","gradient-linear-mirror":"Linear-Mirror","gradient-radial":"Radial","shape-stroke":"Stroke","shape-fill":"Fill","shape-rect":"Rectangle","shape-ellipse":"Ellipse","shape-line":"Line","shape-line-width":"Line Width","shape-outwards":"Outwards","shape-fixed":"Fixed 1:1","shape-auto-pan":"Auto-pan","shape-auto-pan-title":"Automatically moves as you draw","text-instruction":"Click canvas to place text","text-title":"Add Text","text-text":"Text","text-font":"Font","text-placeholder":"Your text","text-color":"Color","text-size":"Size","text-line-height":"Line Height","text-letter-spacing":"Letter Spacing","text-left":"Left","text-center":"Center","text-right":"Right","text-italic":"Italic","text-bold":"Bold","text-failed-import":"Failed to import the following files:","text-supported-formats":"Supported formats:","select-select":"Select","select-transform":"Transform","select-lasso":"Lasso","select-polygon":"Polygon","select-boolean-replace":"Replace","select-boolean-add":"Add","select-boolean-subtract":"Subtract","select-all":"All","select-invert":"Invert","select-reset":"Reset","select-fill":"Fill","select-erase":"Erase","select-transform-clone":"Clone","select-transform-clone-applied":"Cloned","select-transform-move-to-layer":"Move to layer:","select-transform-applied":"Transformation applied","select-transform-empty":"Selected area on active layer is empty.","save-reminder-title":"Unsaved Work","save-reminder-text":"Image was not saved in {a} minutes{b}. Save now to prevent eventual loss.","save-reminder-save-psd":"Save As PSD","save-reminder-psd-layers":"PSD will remember all layers.","backup-drawing":"You can backup your drawing.","submit":"Submit","submit-title":"Submit Drawing","submit-prompt":"Submit drawing?","submit-submitting":"Submitting","embed-init-loading":"Loading app","embed-init-waiting":"Waiting for image","help":"Help","tab-settings":"Settings","settings-language":"Language","settings-language-reload":"Will update after reloading.","settings-theme":"Theme","settings-save-reminder-label":"Save Reminder","settings-save-reminder-disabled":"disabled","settings-save-reminder-confirm-title":"Turn off Save Reminder?","settings-save-reminder-confirm-a":"There is no autosave and browser tabs don\'t last forever. If you don\'t periodically save you will likely lose work.","settings-save-reminder-confirm-b":"Disable at your own risk?","settings-save-reminder-confirm-disable":"Disable","theme-dark":"Dark","theme-light":"Light","terms-of-service":"Terms of Service","licenses":"Licenses","source-code":"Source Code","auto":"auto","zoom-in":"Zoom In","zoom-out":"Zoom Out","radius":"Radius","constrain-proportions":"Constrain Proportions","width":"Width","height":"Height","opacity":"Opacity","scatter":"Scatter","red":"Red","green":"Green","blue":"Blue","eraser":"Eraser","center":"Center","layers":"Layers","background":"Background","scaling-algorithm":"Scaling Algorithm","algorithm-smooth":"Smooth","algorithm-pixelated":"Pixelated","preview":"Preview","angle-snap":"Snap","angle-snap-title":"45° Angle Snapping","lock-alpha":"Lock Alpha","lock-alpha-title":"Locks layer\'s alpha channel","reverse":"Reverse","compare-before":"Before","compare-after":"After","loading":"Loading","more":"More","x-minutes":"{x}min","wip":"Work in progress","browser-zoom-help":"Double-tap or pinch-out to reset browser zoom.","dismiss":"Dismiss"}')}),c("8mlhh",function(e,r){e.exports=l("ih7W4")(t("5RGAp")).then(function(){return l("fz5vW")})}),c("ih7W4",function(e,t){"use strict";e.exports=l("5Y6Bl")(function(e){return new Promise(function(t,r){if([].concat(document.getElementsByTagName("script")).some(function(t){return t.src===e}))return void t();var n=document.createElement("link");n.href=e,n.rel="preload",n.as="script",document.head.appendChild(n);var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=e,i.onerror=function(t){var n=TypeError("Failed to fetch dynamically imported module: ".concat(e,". Error: ").concat(t.message));i.onerror=i.onload=null,i.remove(),r(n)},i.onload=function(){i.onerror=i.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(i)})})}),c("5Y6Bl",function(e,t){"use strict";var r={},n={},i={};e.exports=function(e,t){return function(o){var a=function(e){switch(e){case"preload":return n;case"prefetch":return i;default:return r}}(t);return a[o]?a[o]:a[o]=e.apply(null,arguments).catch(function(e){throw delete a[o],e})}}}),c("hLG03",function(e,r){e.exports=l("ih7W4")(t("3uTpJ")).then(function(){return l("5xWmk")})}),c("kJrPi",function(e,r){e.exports=l("ih7W4")(t("4XbAZ")).then(function(){return l("gFNXg")})}),c("bI71U",function(e,r){e.exports=l("ih7W4")(t("2bKIP")).then(function(){return l("iGIhP")})}),c("eICi1",function(e,r){e.exports=l("ih7W4")(t("i0BNf")).then(function(){return l("9105N")})}),c("kqusB",function(e,r){e.exports=l("ih7W4")(t("98Cvg")).then(function(){return l("dH6Cx")})}),c("57GX6",function(e,r){e.exports=l("ih7W4")(t("y5edP")).then(function(){return l("7ZPTi")})}),c("h75GH",function(e,r){e.exports=l("ih7W4")(t("9fDFY")).then(function(){return l("2Ylu6")})}),c("55azR",function(e,r){e.exports=l("ih7W4")(t("cW2nR")).then(function(){return l("aeHic")})}),c("fWO0c",function(e,r){e.exports=l("ih7W4")(t("8ucza")).then(function(){return l("52L7X")})}),c("4zES7",function(e,r){e.exports=l("ih7W4")(t("f3RKT")).then(function(){return l("hmSlK")})}),c("7KXHm",function(e,r){e.exports=l("ih7W4")(t("fVlhe")).then(function(){return l("cmxjs")})}),c("aqoL6",function(e,r){e.exports=l("ih7W4")(t("kcBSP")).then(function(){return l("6vhv2")})}),c("7TgKV",function(e,r){e.exports=l("ih7W4")(t("4RByM")).then(function(){return l("3bjy6")})}),c("2HU4B",function(e,r){e.exports=l("ih7W4")(t("ap9yw")).then(function(){return l("aWNha")})}),c("lWIVr",function(e,r){e.exports=l("ih7W4")(t("dsJ3g")).then(function(){return l("blNy6")})}),c("bGxAd",function(e,r){e.exports=l("ih7W4")(t("lF1Tu")).then(function(){return l("iRLcJ")})}),c("6l0gQ",function(t,r){e(t.exports,"LocalStorage",function(){return o});var n=l("cx0mh"),i=l("7h4XF"),o=function(){"use strict";function e(){(0,n._)(this,e)}return(0,i._)(e,null,[{key:"getItem",value:function(e){var t=null;try{t=localStorage.getItem(e)}catch(e){this.error=e}return t}},{key:"setItem",value:function(e,t){try{localStorage.setItem(e,t)}catch(e){this.error=e}}},{key:"removeItem",value:function(e){try{localStorage.removeItem(e)}catch(e){this.error=e}}},{key:"getError",value:function(){return this.error}}]),e}()}),c("1C8RU",function(t,r){e(t.exports,"THEME",function(){return u});var n=l("cx0mh"),i=l("7h4XF"),o=l("7jh4K"),a=l("6l0gQ"),s="klecks-theme",u=new(function(){"use strict";function e(){var t=this;(0,n._)(this,e),this.mediaQueryTheme="light",this.theme="light",this.listeners=[],this.mediaQueryTheme=(0,o.isDark)()?"dark":"light",(0,o.addIsDarkListener)(function(){t.mediaQueryTheme=(0,o.isDark)()?"dark":"light",t.updateTheme()}),this.storedTheme=this.readLocalStorage(),addEventListener("storage",function(e){e.key===s&&(t.storedTheme=t.readLocalStorage(),t.updateTheme())}),this.updateTheme()}return(0,i._)(e,[{key:"updateTheme",value:function(){var e=this.theme;this.theme=this.storedTheme||this.mediaQueryTheme,this.theme!==e&&(document.body.classList.toggle("kl-theme-dark","dark"===this.theme),this.listeners.forEach(function(e){return e()}))}},{key:"readLocalStorage",value:function(){var e=a.LocalStorage.getItem(s);return e&&("string"!=typeof e||["dark","light"].includes(e))||(e=void 0,a.LocalStorage.removeItem(s)),e}},{key:"isDark",value:function(){return"dark"===this.theme}},{key:"addIsDarkListener",value:function(e){this.listeners.includes(e)||this.listeners.push(e)}},{key:"removeIsDarkListener",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e)return void this.listeners.splice(t,1)}},{key:"getMediaQueryTheme",value:function(){return this.mediaQueryTheme}},{key:"getStoredTheme",value:function(){return this.storedTheme}},{key:"setStoredTheme",value:function(e){e?a.LocalStorage.setItem(s,e):a.LocalStorage.removeItem(s),this.storedTheme=e,this.updateTheme()}}]),e}())}),c("7jh4K",function(t,r){e(t.exports,"insertAfter",function(){return a}),e(t.exports,"loadImage",function(){return s}),e(t.exports,"asyncLoadImage",function(){return u}),e(t.exports,"css",function(){return c}),e(t.exports,"setAttributes",function(){return h}),e(t.exports,"append",function(){return d}),e(t.exports,"fitInto",function(){return f}),e(t.exports,"centerWithin",function(){return p}),e(t.exports,"getDate",function(){return g}),e(t.exports,"gcd",function(){return m}),e(t.exports,"reduce",function(){return v}),e(t.exports,"decToFraction",function(){return b}),e(t.exports,"isBlob",function(){return y}),e(t.exports,"imageBlobToUrl",function(){return x}),e(t.exports,"dateDayDifference",function(){return w}),e(t.exports,"copyObj",function(){return A}),e(t.exports,"shareCanvas",function(){return S}),e(t.exports,"handleClick",function(){return E}),e(t.exports,"createSvg",function(){return function e(t){var r=document.createElementNS("http://www.w3.org/2000/svg",t.elementType);return Object.entries(t).forEach(function(t){var n=(0,i._)(t,2),o=n[0],a=n[1];"childrenArr"===o?a.forEach(function(t){r.append(e(t))}):"css"===o?c(r,a):"elementType"!==o&&r.setAttribute(o,a)}),r}}),e(t.exports,"throwIfNull",function(){return _}),e(t.exports,"throwIfUndefined",function(){return P}),e(t.exports,"nullToUndefined",function(){return H}),e(t.exports,"isDark",function(){return k}),e(t.exports,"addIsDarkListener",function(){return R}),e(t.exports,"base64ToBlob",function(){return I}),e(t.exports,"createArray",function(){return M}),e(t.exports,"randomUuid",function(){return O}),e(t.exports,"sleep",function(){return C}),e(t.exports,"timeoutWrapper",function(){return F});var n=l("1LaJZ"),i=l("8N5YG"),o=l("2gUX3");function a(e,t){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)}function s(e,t){var r=0;!function n(){1e3===r?alert("couldn't load"):e.complete?(r++,t()):setTimeout(n,1)}()}function u(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src=e})}function c(e,t){var r=e.style;Object.keys(t).forEach(function(e){r[e]=t[e],"userSelect"===e&&(r.webkitUserSelect=t[e])})}function h(e,t){for(var r,n=Object.keys(t),i=0;i<n.length;i++)r=n[i],e.setAttribute(r,t[r])}function d(e,t){var r=document.createDocumentFragment();t.forEach(function(e){return e&&r.append(e)}),e.append(r)}function f(e,t,r,n,i){var o=e*r,a=t*r;return o>r&&(a=r/o*a,o=r),a>n&&(o=n/a*o,a=n),i&&(o=Math.max(i,o),a=Math.max(i,a)),{width:o,height:a}}function p(e,t,r,n){return{x:e/2-r/2,y:t/2-n/2}}function g(){var e=new Date;return e.getFullYear()+"_"+(e.getMonth()+1).toString().padStart(2,"0")+"_"+e.getDate().toString().padStart(2,"0")+"_"+(60*e.getHours()+e.getMinutes()).toString(36).padStart(3,"0")+"_"}function m(e,t){return t?m(t,e%t):e}function v(e,t){var r=m(e,t);return[e/r,t/r]}function b(e){var t=Math.pow(10,e.toString().length-2);return v(e*t,t)}function y(e){return e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e)}function x(e){if(!e)throw Error("blobObj is undefined or null");if(window.Blob&&e instanceof Blob)return URL.createObjectURL(e);if("Object"===e.constructor.name)return"data:"+e.type+";"+e.encoding+","+e.data;throw Error("unknown blob format")}function w(e,t){return e=new Date(e),t=new Date(t),e.setHours(0,0,0,0),t.setHours(0,0,0,0),(t.getTime()-e.getTime())/864e5}function A(e){return JSON.parse(JSON.stringify(e))}function S(e){var t="image/png",r=function(){return alert("sharing not supported")};e.canvas.toBlob(function(n){if(!n){r(),e.callback();return}try{var i=[new File([n],e.fileName,{type:t})];navigator.share({title:e.title,files:i}).then(function(){}).catch(function(){r()})}catch(e){r()}e.callback()},t)}function E(e){var t=e.target;if(!t)return!1;for(var r=t;r;){if(["A","LABEL","INPUT","SUMMARY"].includes(r.tagName))return!0;r=r.parentElement}return e.preventDefault(),!1}function _(e){if(null===e)throw Error("value is null");return e}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value is undefined";if(void 0===e)throw Error(t);return e}function H(e){return null===e?void 0:e}var T="matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)");function k(){return T&&T.matches}function R(e){T&&"addEventListener"in T&&T.addEventListener("change",e)}function I(e){for(var t=e.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/),r=atob(t[3]),n=new Uint8Array(new ArrayBuffer(r.length)),i=0;i<n.length;i++)n[i]=r.charCodeAt(i);return new Blob([n],{type:t[1]})}function M(e,t){return Array(e).fill(t)}function O(){return"randumUUID"in crypto?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function C(e){return new Promise(function(t){return setTimeout(t,e)})}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return(0,n._)(function(){return(0,o.__generator)(this,function(n){return[2,Promise.race([e,new Promise(function(e,n){setTimeout(function(){return n(Error(`Promise "${t}" timed out.`))},r)})])]})})()}}),c("8N5YG",function(t,r){e(t.exports,"_",function(){return s});var n=l("vDBh4"),i=l("lMMat"),o=l("keO5I"),a=l("kWe4k");function s(e,t){return(0,n._)(e)||(0,i._)(e,t)||(0,a._)(e,t)||(0,o._)()}}),c("vDBh4",function(t,r){e(t.exports,"_",function(){return n});function n(e){if(Array.isArray(e))return e}}),c("lMMat",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}}),c("keO5I",function(t,r){e(t.exports,"_",function(){return n});function n(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}),c("kWe4k",function(t,r){e(t.exports,"_",function(){return i});var n=l("gszWS");function i(e,t){if(e){if("string"==typeof e)return(0,n._)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return(0,n._)(e,t)}}}),c("gszWS",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}}),c("iVf04",function(t,r){e(t.exports,"loadAgPsd",function(){return a});var n,i=l("1LaJZ"),o=l("2gUX3");function a(){return(0,i._)(function(){return(0,o.__generator)(this,function(e){switch(e.label){case 0:if(n)return[3,2];return[4,l("6caCk")];case 1:n=e.sent(),e.label=2;case 2:return[2,n]}})})()}}),c("6caCk",function(e,r){e.exports=l("ih7W4")(t("kNYzr")).then(function(){return l("2m2jt")})}),c("72Jv0",function(t,r){e(t.exports,"appendTextDiv",function(){return o}),e(t.exports,"isInputFocused",function(){return a}),e(t.exports,"unfocusAnyInput",function(){return s}),e(t.exports,"clearSelection",function(){return u}),e(t.exports,"makeUnfocusable",function(){return c}),e(t.exports,"el",function(){return d}),e(t.exports,"destroyEl",function(){return f}),e(t.exports,"createImage",function(){return p});var n=l("7jh4K"),i=l("eWjiX");function o(e,t){var r=document.createElement("div");return r.innerHTML=t,e.append(r),r}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!!document.activeElement&&["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName);return t?r:r&&!(null==(e=document.activeElement)?void 0:e.getAttribute("data-ignore-focus"))}function s(){if(a(!0)){var e=i.BB.el({parent:document.body,tagName:"input",css:{opacity:"0",width:"0",height:"0"}});setTimeout(function(){e.select(),e.focus(),e.remove()},10)}}function u(){if(window.getSelection){var e=window.getSelection();e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}}var c=function(){function e(e){e.preventDefault();var t=!1;if(e.relatedTarget)try{e.relatedTarget.focus(),t=!0}catch(e){console.error("failed to focus")}t||e.currentTarget.blur()}return function(t){t.setAttribute("tabindex","-1"),t.addEventListener("focus",e)}}(),h=[];function d(e){if(!e)return document.createElement("div");var t=document.createElement(e.tagName?e.tagName:"div");e.css&&(0,n.css)(t,e.css),e.content&&("string"==typeof e.content?t.innerHTML=e.content:Array.isArray(e.content)?i.BB.append(t,e.content):t.append(e.content)),e.textContent&&(t.textContent=e.textContent),e.className&&(t.className=e.className),e.id&&(t.id=e.id),e.parent&&e.parent.append(t),"title"in e&&void 0!==e.title&&(t.title=e.title);var r=[];if(void 0!==e.onClick&&(t.addEventListener("click",e.onClick),e.noRef||r.push(["click",e.onClick])),void 0!==e.onChange&&(t.addEventListener("change",e.onChange),e.noRef||r.push(["change",e.onChange])),r.length>0&&h.push({el:t,listeners:r}),"custom"in e&&e.custom)for(var o=Object.keys(e.custom),a=0;a<o.length;a++)t.setAttribute(o[a],e.custom[o[a]]);return t}function f(e){if(e)for(var t=0;t<h.length;t++){var r=h[t];if(r.el===e){r.listeners.forEach(function(t){e.removeEventListener(t[0],t[1])}),h.splice(t,1);break}}}function p(e){var t=new Image;return void 0!==e.src&&(t.src=e.src),void 0!==e.alt&&(t.alt=e.alt),void 0!==e.width&&(t.width=e.width),void 0!==e.height&&(t.height=e.height),void 0!==e.className&&(t.className=e.className),e.css&&(0,n.css)(t,e.css),t}}),c("eWjiX",function(t,r){e(t.exports,"BB",function(){return E});var n=l("7jh4K"),i=l("6J2My"),o=l("idV3L"),a=l("04lDo"),s=l("eIcQa"),u=l("kVHNC"),c=l("4toIY"),h=l("af1iA"),d=l("dJ1E2"),f=l("72Jv0"),p=l("eg83P"),g=l("eelgW"),m=l("i0uIf"),v=l("6l0gQ"),b=l("jjWRi"),y=l("2pgVs"),x=l("joplQ"),w=l("c1lmK"),A=l("635F6"),S=l("gCzYB"),E={eventUsesHighResTimeStamp:i.EVENT_USES_HIGH_RES_TIMESTAMP,hasPointerEvents:i.HAS_POINTER_EVENTS,isCssMinMaxSupported:i.IS_CSS_MIN_MAX_SUPPORTED,canShareFiles:i.canShareFiles,unsetEventHandler:i.unsetEventHandler,insertAfter:n.insertAfter,loadImage:n.loadImage,css:n.css,setAttributes:n.setAttributes,append:n.append,fitInto:n.fitInto,centerWithin:n.centerWithin,getDate:n.getDate,gcd:n.gcd,reduce:n.reduce,decToFraction:n.decToFraction,imageBlobToUrl:n.imageBlobToUrl,dateDayDifference:n.dateDayDifference,copyObj:n.copyObj,shareCanvas:n.shareCanvas,handleClick:n.handleClick,createSvg:n.createSvg,BbLog:m.BbLog,LocalStorage:v.LocalStorage,throwIfNull:n.throwIfNull,nullToUndefined:n.nullToUndefined,isDark:n.isDark,mix:p.mix,dist:p.dist,distSquared:p.distSquared,lenSquared:p.lenSquared,pointsToAngleRad:p.pointsToAngleRad,pointsToAngleDeg:p.pointsToAngleDeg,isInsideRect:p.isInsideRect,clamp:p.clamp,rotate:p.rotate,rotateAround:p.rotateAround,Matrix:u.Matrix,Vec2:c.Vec2,intDxy:p.intDxy,roundEven:p.roundEven,roundUneven:p.roundUneven,round:p.round,updateBounds:p.updateBounds,boundsInArea:p.boundsInArea,projectPointOnLine:h.projectPointOnLine,PointLine:h.PointLine,BezierLine:h.BezierLine,SplineInterpolator:h.SplineInterpolator,powerSplineInput:h.powerSplineInput,canvas:g.createCanvas,ctx:s.ctx,copyCanvas:s.copyCanvas,testShouldPixelate:s.testShouldPixelate,drawTransformedImageWithBounds:s.drawTransformedImageWithBounds,drawTransformedImageOnCanvas:s.drawTransformedImageOnCanvas,createCheckerCanvas:s.createCheckerCanvas,createCheckerDataUrl:s.createCheckerDataUrl,resizeCanvas:s.resizeCanvas,convertToAlphaChannelCanvas:s.convertToAlphaChannelCanvas,freeCanvas:s.freeCanvas,canvasBounds:s.canvasBounds,HSV:d.HSV,RGB:d.RGB,CMYK:d.CMYK,ColorConverter:d.ColorConverter,testIsWhiteBestContrast:d.testIsWhiteBestContrast,appendTextDiv:f.appendTextDiv,clearSelection:f.clearSelection,el:f.el,destroyEl:f.destroyEl,isInputFocused:f.isInputFocused,unfocusAnyInput:f.unfocusAnyInput,KeyListener:o.KeyListener,PointerListener:a.PointerListener,sameKeys:o.sameKeys,EventChain:S.EventChain,DoubleTapper:w.DoubleTapper,NFingerTapper:y.NFingerTapper,PinchZoomer:x.PinchZoomer,CoalescedExploder:b.CoalescedExploder,OnePointerLimiter:A.OnePointerLimiter};Object.keys(E)}),c("6J2My",function(t,r){e(t.exports,"IS_FIREFOX",function(){return i}),e(t.exports,"EVENT_USES_HIGH_RES_TIMESTAMP",function(){return o}),e(t.exports,"HAS_POINTER_EVENTS",function(){return a}),e(t.exports,"IS_CSS_MIN_MAX_SUPPORTED",function(){return s}),e(t.exports,"canShareFiles",function(){return u}),e(t.exports,"unsetEventHandler",function(){return l});var n,i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o=(n=new Event("").timeStamp<36e5,function(){return n}),a=!!window.PointerEvent,s=function(){var e;function t(){var t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="max(0px, 25px)",document.body.append(t),setTimeout(function(){e=25===t.offsetLeft,t.remove()},25)}return document.body?t():window.addEventListener("DOMContentLoaded",function(){t()}),function(){if(void 0===e)throw Error("isCssMinMaxSupported not initialized");return e}}(),u=function(){return"share"in navigator&&"canShare"in navigator};function l(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach(function(t){e[t]=null})}}),c("idV3L",function(t,r){e(t.exports,"KeyListener",function(){return S}),e(t.exports,"sameKeys",function(){return E});var n,i,o,a,s,u,c,h,d,f,p,g,m,v,b,y=l("cx0mh"),x=l("7h4XF"),w=l("8N5YG"),A=(i=function(e){var t=e.key,r=e.code;if(t in h){var i=h[t];if(c[i])return void m(i,e,d.join("+"),!0);"cmd"===i?g(i,r):clearTimeout(n),"esc"===i&&setTimeout(function(){return a()}),c[i]=!0,f[r]=i,d.push(i),m(i,e,d.join("+"))}},o=function(e){var t=e.code,r=d.join("+");if(["Meta","MetaLeft","MetaRight","OSLeft","OSRight"].includes(t)||c.cmd)return void a();var n=f[t];if(void 0!==n){c[n]=!1,f[t]=void 0;for(var i=0;i<d.length;i++)d[i]==n&&(d.splice(i,1),i--);v(n,e,r)}},a=function(){var e=d.join("+");d=[],f={};var t=[];u.forEach(function(e){c[e]&&(c[e]=!1,t.push(e))});for(var r=0;r<t.length;r++)v(t[r],{preventDefault:function(){},stopPropagation:function(){}},e);b()},u=Object.keys(s={space:[" ","Spacebar"],alt:["Alt","AltGraph"],shift:"Shift",ctrl:"Control",cmd:["Meta","MetaLeft","MetaRight"],enter:"Enter",esc:"Escape",backspace:"Backspace",delete:"Delete",sqbr_open:"[",sqbr_close:"]",a:["a","A"],b:["b","B"],c:["c","C"],e:["e","E"],f:["f","F"],g:["g","G"],l:["l","L"],r:["r","R"],s:["s","S"],t:["t","T"],u:["u","U"],x:["x","X"],y:["y","Y"],z:["z","Z"],plus:"+",minus:"-",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",home:"Home",end:"End"}),c=Object.entries(s).reduce(function(e,t){return e[(0,w._)(t,1)[0]]=!1,e},{}),h=Object.entries(s).reduce(function(e,t){var r=(0,w._)(t,2),n=r[0],i=r[1];return"string"==typeof i?e[i]=n:i.forEach(function(t){e[t]=n}),e},{}),d=[],f={},p=[],g=function(e,t){n=setTimeout(function(){if(1===d.length&&"cmd"!==d[0]){var r=d.join("+");c[e]=!1,f[t]=void 0;for(var i=0;i<d.length;i++)d[i]==e&&(d.splice(i,1),i--);v(e,{preventDefault:function(){},stopPropagation:function(){}},r),n=void 0}},1e3)},m=function(e,t,r,n){p.forEach(function(i){i[0]&&i[0](e,t,r,n)})},v=function(e,t,r){p.forEach(function(n){n[1]&&n[1](e,t,r)})},b=function(){p.forEach(function(e){e[2]&&e[2]()})},{add:function(e){if(!p.includes(e)){var t=0===p.length;p.push(e),t&&(document.addEventListener("keydown",i),document.addEventListener("keyup",o),window.addEventListener("blur",a))}},remove:function(e){if(p.includes(e)){for(var t=1===p.length,r=0;r<p.length;r++)if(p[r]===e){p.splice(r,1);break}t&&(document.removeEventListener("keydown",i),document.removeEventListener("keyup",o),window.removeEventListener("blur",a))}},getIsDown:function(){return c},getCombo:function(){return d},blur:a}),S=function(){"use strict";function e(t){(0,y._)(this,e),this.onDown=t.onDown,this.onUp=t.onUp,this.onBlur=t.onBlur,this.ref=[this.onDown,this.onUp,this.onBlur],A.add(this.ref)}return(0,x._)(e,[{key:"isPressed",value:function(e){if(!(e in A.getIsDown()))throw'key "'+e+'" not found';return A.getIsDown()[e]}},{key:"getComboStr",value:function(){return A.getCombo().join("+")}},{key:"comboOnlyContains",value:function(e){for(var t=0;t<A.getCombo().length;t++)if(!e.includes(A.getCombo()[t]))return!1;return!0}},{key:"destroy",value:function(){A.remove(this.ref),A.blur()}}]),e}();function E(e,t){return e.split("+").sort().join("+")===t.split("+").sort().join("+")}}),c("04lDo",function(t,r){e(t.exports,"PointerListener",function(){return S});var n=l("cx0mh"),i=l("7h4XF"),o=l("cL71g"),a=l("4EWN2"),s=l("6J2My"),u=l("93oLo"),c=l("eIAon"),h=[];function d(e){switch(e){case 1:return"left";case 2:return"right";case 4:return"middle";default:return}}var f=new(0,c.PressureNormalizer),p=(0,s.EVENT_USES_HIGH_RES_TIMESTAMP)()?0:-performance.timing.navigationStart,g=s.HAS_POINTER_EVENTS?"pointerdown":"mousedown",m=s.HAS_POINTER_EVENTS?"pointermove":"mousemove",v=s.HAS_POINTER_EVENTS?"pointerup":"mouseup",b=s.HAS_POINTER_EVENTS?"pointercancel":"mousecancel",y=s.HAS_POINTER_EVENTS?"pointerleave":"mouseleave",x=s.HAS_POINTER_EVENTS?"pointerenter":"mouseenter";function w(e){if("corrected"in e)return e.corrected;var t,r={pointerId:e.pointerId,pointerType:e.pointerType,pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,movementX:e.movementX,movementY:e.movementY,timeStamp:e.timeStamp+p,pressure:f.normalize(e.pressure,e.type,e.pointerType),buttons:void 0!==e.buttons?e.buttons:void 0!==e.button?[1,4,2,8,16][e.button]:0,button:e.button,coalescedArr:[],eventPreventDefault:function(){return e.preventDefault()},eventStopPropagation:function(){return e.stopPropagation()}};e.corrected=r;var n=null;"pointerId"in e?"pressure"in e&&0!==e.buttons&&("touch"===e.pointerType&&0===e.pressure&&(r.pressure=1,n=1),"mouse"===e.pointerType&&(.5===e.pressure||0===e.pressure)&&(r.pressure=1,n=1)):(r.pointerId=0,r.pointerType="mouse",r.pressure=+(0!==e.buttons),n=r.pressure),s.IS_FIREFOX&&"mouse"!=e.pointerType&&"pointermove"===e.type&&0===e.buttons&&(r.buttons=1);var i=[];"getCoalescedEvents"in e&&(i=e.getCoalescedEvents());for(var o=function(e){for(var t=h.length-1;t>=0;t--)if(e.pointerId===h[t].pointerId)return h[t];return null}(r)||(t={pointerId:r.pointerId,lastPageX:null,lastPageY:null},h.push(t),h.length>15&&h.shift(),t),a=o.lastPageX,u=o.lastPageY,l=0;l<i.length;l++){var c=i[l];r.coalescedArr.push({pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY,movementX:null===o.lastPageX?0:c.pageX-o.lastPageX,movementY:null===o.lastPageY?0:c.pageY-o.lastPageY,timeStamp:0===c.timeStamp?r.timeStamp:c.timeStamp+p,pressure:null===n?f.normalize(c.pressure):n}),o.lastPageX=c.pageX,o.lastPageY=c.pageY}return o.lastPageX=r.pageX,o.lastPageY=r.pageY,r.movementX=null===a?0:o.lastPageX-a,r.movementY=null===u?0:o.lastPageY-u,r}var A={passive:!1},S=function(){"use strict";function e(t){var r,i=this;(0,n._)(this,e),this.isDestroyed=!1,this.isOverCounter=0,this.dragObjArr=[],this.dragPointerIdArr=[],this.lastPointerType=null,this.didSkip=!1,this.targetElement=t.target,this.onPointerCallback=t.onPointer,this.onWheelCallback=t.onWheel,this.onEnterLeaveCallback=t.onEnterLeave,this.maxPointers=Math.max(1,null!=(r=t.maxPointers)?r:1);var l=function(e){if(!i.isDestroyed&&i.onWheelCallback){var t=i.targetElement.getBoundingClientRect(),r=(0,o._)((0,a._)((0,o._)({},e instanceof WheelEvent?{deltaY:e.deltaY/120,pageX:e.pageX,pageY:e.pageY}:e),{relX:e.clientX-t.left+i.targetElement.scrollLeft,relY:e.clientY-t.top+i.targetElement.scrollTop}),e instanceof WheelEvent?{event:e}:{});i.onWheelCallback(r)}};if(this.wheelCleaner=t.useDirtyWheel?void 0:new(0,u.WheelCleaner)(l),this.onPointerCallback&&(this.onPointerMove=function(e){var t,r=w(e),n=i.lastPointerType;if(i.lastPointerType=r.pointerType,i.dragPointerIdArr.includes(r.pointerId)||i.dragPointerIdArr.length===i.maxPointers||"touch"===r.pointerType){i.didSkip=!1;return}if(!i.didSkip&&"mouse"===r.pointerType&&"pen"===n){i.didSkip=!0;return}i.didSkip=!1;var o=i.createPointerOutEvent("pointermove",r);null==(t=i.onPointerCallback)||t.call(i,o)},this.onPointerDown=function(e,t){var r,n=w(e);if(!i.dragPointerIdArr.includes(n.pointerId)&&i.dragPointerIdArr.length!==i.maxPointers&&[1,2,4].includes(n.buttons)){0!==i.dragObjArr.length||t||i.setupDocumentListeners();var o={pointerId:n.pointerId,pointerType:n.pointerType,downPageX:n.pageX,downPageY:n.pageY,buttons:n.buttons,lastPageX:n.pageX,lastPageY:n.pageY,lastTimeStamp:n.timeStamp};i.dragObjArr.push(o),i.dragPointerIdArr.push(n.pointerId);var a=i.createPointerOutEvent("pointerdown",n,{downPageX:n.pageX,downPageY:n.pageY,button:d(n.buttons),pressure:n.pressure});null==(r=i.onPointerCallback)||r.call(i,a)}},this.windowOnPointerMove=function(e){var t=w(e);if(i.dragPointerIdArr.includes(t.pointerId)){var r=i.getDragObj(t.pointerId);if(r){if(t.buttons!==r.buttons){1===i.dragObjArr.length&&i.destroyDocumentListeners(),i.removeDragObj(t.pointerId);var n,o,a=i.createPointerOutEvent("pointerup",t,{downPageX:r.downPageX,downPageY:r.downPageY});null==(o=i.onPointerCallback)||o.call(i,a);return}if("pen"!==t.pointerType||t.pageX!==r.lastPageX||t.pageY!==r.lastPageY||t.timeStamp!==r.lastTimeStamp){var s=i.createPointerOutEvent("pointermove",t,{downPageX:r.downPageX,downPageY:r.downPageY,button:d(t.buttons),pressure:t.pressure});r.lastPageX=t.pageX,r.lastPageY=t.pageY,r.lastTimeStamp=t.timeStamp,null==(n=i.onPointerCallback)||n.call(i,s)}}}},this.windowOnPointerUp=function(e){var t,r=w(e);if(i.dragPointerIdArr.includes(r.pointerId)){1===i.dragObjArr.length&&i.destroyDocumentListeners();var n=i.removeDragObj(r.pointerId);if(n){var o=i.createPointerOutEvent("pointerup",r,{downPageX:n.downPageX,downPageY:n.downPageY});null==(t=i.onPointerCallback)||t.call(i,o)}}},this.windowOnPointerLeave=function(e){var t,r=w(e);if(i.dragPointerIdArr.includes(r.pointerId)){1===i.dragObjArr.length&&i.destroyDocumentListeners();var n=i.removeDragObj(r.pointerId);if(n){var o=i.createPointerOutEvent("pointerup",r,{downPageX:n.downPageX,downPageY:n.downPageY});null==(t=i.onPointerCallback)||t.call(i,o)}}},this.targetElement.addEventListener(m,this.onPointerMove,A),this.targetElement.addEventListener(g,this.onPointerDown,A),!s.HAS_POINTER_EVENTS)){var c=function(e,t,r){return{pointerId:e.identifier,pointerType:"touch",pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,button:r?0:void 0,buttons:+!!r,timeStamp:t.timeStamp,target:t.target,pressure:+!!r,preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}}},h=function(e,t){for(var r=0;r<e.changedTouches.length;r++){var n=c(e.changedTouches[r],e,["start","move"].includes(t));"start"===t?i.onPointerDown(n,!1):"move"===t?i.windowOnPointerMove(n):"end"===t?i.windowOnPointerUp(n):i.windowOnPointerLeave(n)}};this.onTouchStart=function(e){e.preventDefault(),h(e,"start")},this.onTouchMove=function(e){h(e,"move")},this.onTouchEnd=function(e){h(e,"end")},this.onTouchCancel=function(e){h(e,"cancel")},this.targetElement.addEventListener("touchstart",this.onTouchStart,A),this.targetElement.addEventListener("touchmove",this.onTouchMove,A),this.targetElement.addEventListener("touchend",this.onTouchEnd,A),this.targetElement.addEventListener("touchcancel",this.onTouchCancel,A)}this.onWheelCallback&&(this.onWheel=function(e){i.wheelCleaner?i.wheelCleaner.process(e):l(e)},this.targetElement.addEventListener("wheel",this.onWheel,{passive:!!t.isWheelPassive})),this.onEnterLeaveCallback&&(this.onPointerEnter=function(){var e;i.isOverCounter++,null==(e=i.onEnterLeaveCallback)||e.call(i,!0)},this.onPointerLeave=function(){var e;i.isOverCounter--,null==(e=i.onEnterLeaveCallback)||e.call(i,!1)},this.targetElement.addEventListener(x,this.onPointerEnter,A),this.targetElement.addEventListener(y,this.onPointerLeave,A)),t.fixScribble&&(this.onTouchMoveScribbleFix=function(e){return e.preventDefault()},this.targetElement.addEventListener("touchmove",this.onTouchMoveScribbleFix,A))}return(0,i._)(e,[{key:"getDragObj",value:function(e){for(var t=0;t<this.dragObjArr.length;t++)if(e===this.dragObjArr[t].pointerId)return this.dragObjArr[t];return null}},{key:"removeDragObj",value:function(e){for(var t=null,r=0;r<this.dragPointerIdArr.length;r++)this.dragPointerIdArr[r]===e&&(t=this.dragObjArr[r],this.dragObjArr.splice(r,1),this.dragPointerIdArr.splice(r,1),r--);return t}},{key:"createPointerOutEvent",value:function(e,t,r){var n,i=this.targetElement.getBoundingClientRect(),a=(0,o._)({type:e,pointerId:t.pointerId,pointerType:t.pointerType,pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,relX:t.clientX-i.left+this.targetElement.scrollLeft,relY:t.clientY-i.top+this.targetElement.scrollTop,dX:t.movementX,dY:t.movementY,time:t.timeStamp,eventPreventDefault:t.eventPreventDefault,eventStopPropagation:t.eventStopPropagation},r);if("pointermove"===e&&(a.coalescedArr=[],t.coalescedArr.length>1))for(var s=0;s<t.coalescedArr.length;s++)n=t.coalescedArr[s],a.coalescedArr.push({pageX:n.pageX,pageY:n.pageY,clientX:n.clientX,clientY:n.clientY,relX:n.clientX-i.left+this.targetElement.scrollLeft,relY:n.clientY-i.top+this.targetElement.scrollTop,dX:n.movementX,dY:n.movementY,time:n.timeStamp});return a}},{key:"setupDocumentListeners",value:function(){this.windowOnPointerMove&&document.addEventListener(m,this.windowOnPointerMove,A),this.windowOnPointerUp&&document.addEventListener(v,this.windowOnPointerUp,A),this.windowOnPointerLeave&&document.addEventListener(b,this.windowOnPointerLeave,A),this.windowOnPointerLeave&&document.addEventListener(y,this.windowOnPointerLeave,A)}},{key:"destroyDocumentListeners",value:function(){this.windowOnPointerMove&&document.removeEventListener(m,this.windowOnPointerMove),this.windowOnPointerUp&&document.removeEventListener(v,this.windowOnPointerUp),this.windowOnPointerLeave&&document.removeEventListener(b,this.windowOnPointerLeave),this.windowOnPointerLeave&&document.removeEventListener(y,this.windowOnPointerLeave)}},{key:"destroy",value:function(){!this.isDestroyed&&(this.isDestroyed=!0,this.onPointerEnter&&this.targetElement.removeEventListener(x,this.onPointerEnter),this.onPointerLeave&&this.targetElement.removeEventListener(y,this.onPointerLeave),this.onPointerMove&&this.targetElement.removeEventListener(m,this.onPointerMove),this.onPointerDown&&this.targetElement.removeEventListener(g,this.onPointerDown),this.onWheel&&this.targetElement.removeEventListener("wheel",this.onWheel),this.destroyDocumentListeners(),this.onTouchMoveScribbleFix&&document.removeEventListener("touchmove",this.onTouchMoveScribbleFix),this.onTouchStart&&this.targetElement.removeEventListener("touchstart",this.onTouchStart),this.onTouchMove&&this.targetElement.removeEventListener("touchmove",this.onTouchMove),this.onTouchEnd&&this.targetElement.removeEventListener("touchend",this.onTouchEnd),this.onTouchCancel&&this.targetElement.removeEventListener("touchcancel",this.onTouchCancel))}}]),e}()}),c("93oLo",function(t,r){e(t.exports,"WheelCleaner",function(){return o});var n=l("cx0mh"),i=l("7h4XF"),o=function(){"use strict";function e(t){(0,n._)(this,e),this.callback=t,this.knownUnitArr=[100],this.sequenceLength=0,this.sequenceUnit=null,this.toEmitDelta=null,this.position=null}return(0,i._)(e,[{key:"emit",value:function(e){null!==this.position&&null!==this.sequenceUnit&&this.callback({deltaY:Math.round(e/this.sequenceUnit),pageX:this.position.pageX,pageY:this.position.pageY,clientX:this.position.clientX,clientY:this.position.clientY})}},{key:"endSequence",value:function(){null!==this.toEmitDelta&&(this.emit(this.toEmitDelta),this.toEmitDelta=null),null===this.sequenceUnit||this.knownUnitArr.includes(this.sequenceUnit)||this.knownUnitArr.push(this.sequenceUnit),this.sequenceLength=0,this.sequenceUnit=null}},{key:"process",value:function(e){var t=this;this.position={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY},this.endSequenceTimeout&&clearTimeout(this.endSequenceTimeout),this.endSequenceTimeout=setTimeout(function(){return t.endSequence()},200);var r=e.deltaY;"deltaMode"in e&&1===e.deltaMode&&(r*=100/3);var n=Math.abs(r);if(0===this.sequenceLength){if(this.sequenceLength++,n<50)return;this.sequenceUnit=n,this.knownUnitArr.includes(this.sequenceUnit)?this.emit(r):this.toEmitDelta=r;return}if(null===this.sequenceUnit){this.toEmitDelta=null;return}if(0!==n){if(n===this.sequenceUnit||n/this.sequenceUnit%1<1e-4);else if(this.sequenceUnit/n%1<1e-4)this.sequenceUnit=n;else if(n!==this.sequenceUnit){this.sequenceUnit=null,this.toEmitDelta=null;return}null!==this.toEmitDelta&&(this.emit(this.toEmitDelta),this.toEmitDelta=null),this.emit(r)}}}]),e}()}),c("eIAon",function(t,r){e(t.exports,"PressureNormalizer",function(){return o});var n=l("cx0mh"),i=l("7h4XF"),o=function(){"use strict";function e(){(0,n._)(this,e),this.detectionComplete=!1,this.isApplePencil=!1,this.initialPointerDownPressure=-1,this.pointerDownPressureRepeatCount=0,this.pointerMoveHasDifferentPressure=!1}return(0,i._)(e,[{key:"normalize",value:function(e,t,r){if("pen"!==r)return e;if(!this.detectionComplete&&("pointerdown"===t?-1===this.initialPointerDownPressure?this.initialPointerDownPressure=e:this.initialPointerDownPressure===e?(this.pointerDownPressureRepeatCount++,this.pointerDownPressureRepeatCount>1&&this.pointerMoveHasDifferentPressure&&(this.detectionComplete=!0,this.isApplePencil=!0)):(this.detectionComplete=!0,this.isApplePencil=!1):"pointermove"===t&&this.initialPointerDownPressure!==e&&(this.pointerMoveHasDifferentPressure=!0)),this.detectionComplete&&this.isApplePencil){if(this.initialPointerDownPressure===e)return 0;e=Math.min(2,2*e)}return e}}]),e}()}),c("eIcQa",function(t,r){e(t.exports,"copyCanvas",function(){return c}),e(t.exports,"ctx",function(){return h}),e(t.exports,"testShouldPixelate",function(){return d}),e(t.exports,"drawTransformedImageWithBounds",function(){return f}),e(t.exports,"drawTransformedImageOnCanvas",function(){return p}),e(t.exports,"createCheckerCanvas",function(){return g}),e(t.exports,"createCheckerDataUrl",function(){return m}),e(t.exports,"resizeCanvas",function(){return function e(t,r,n,i,o){if(r&&n&&(r!==t.width||n!==t.height))if(r=Math.max(r,1),n=Math.max(n,1),r<=t.width&&n<=t.height){i=i||(0,a.createCanvas)(),o=o||(0,a.createCanvas)();var s,u,l,c,h=(s=t.width,(u={oldWidthEx:Math.round(Math.log2(s)),oldHeightEx:Math.round(Math.log2(t.height)),newWidthEx:Math.ceil(Math.log2(r)),newHeightEx:Math.ceil(Math.log2(n))}).oldWidthEx=Math.max(u.oldWidthEx,u.newWidthEx),u.oldHeightEx=Math.max(u.oldHeightEx,u.newHeightEx),u);o.width=h.oldWidthEx>h.newWidthEx?Math.pow(2,h.oldWidthEx):r,o.height=h.oldHeightEx>h.newHeightEx?Math.pow(2,h.oldHeightEx):n,i.getContext("2d").save(),o.getContext("2d").save();var d=i,f=o;l=h.oldWidthEx,c=h.oldHeightEx;var p=f.getContext("2d");p.imageSmoothingEnabled=!0,p.imageSmoothingQuality="high",p.globalCompositeOperation="copy",p.drawImage(t,0,0,f.width,f.height);for(var g=f.width,m=f.height;l>h.newWidthEx||c>h.newHeightEx;l--,c--){(p=d.getContext("2d")).imageSmoothingEnabled=!0,p.imageSmoothingQuality="high",p.globalCompositeOperation="copy";var v=l>h.newWidthEx?g/2:g,b=c>h.newHeightEx?m/2:m;d.width=v,d.height=b,p.drawImage(f,0,0,g,m,0,0,v,b),g=v,m=b;var y=d;d=f,f=y}t.width=r,t.height=n;var x=t.getContext("2d");x.save(),x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(f,0,0,g,m,0,0,r,n),x.restore(),i.getContext("2d").restore(),o.getContext("2d").restore()}else if(r>=t.width&&n>=t.height){(i=i||(0,a.createCanvas)()).width=r,i.height=n;var w=i.getContext("2d");w.save(),w.imageSmoothingEnabled=!0,w.imageSmoothingQuality="high",w.drawImage(t,0,0,r,n),w.restore(),t.width=r,t.height=n,t.getContext("2d").drawImage(i,0,0)}else e(t,r,t.height,i,o),e(t,r,n,i,o)}}),e(t.exports,"convertToAlphaChannelCanvas",function(){return v}),e(t.exports,"freeCanvas",function(){return b}),e(t.exports,"canvasBounds",function(){return y}),e(t.exports,"canvasToBlob",function(){return x}),e(t.exports,"drawSelectionMask",function(){return w});var n,i=l("1LaJZ"),o=l("2gUX3"),a=l("eelgW"),s=l("7jh4K"),u=l("9b3eo");function c(e){var t=(0,a.createCanvas)(e.width,e.height),r=t.getContext("2d");if(!r)throw Error("2d context not supported or canvas already initialized");return r.drawImage(e,0,0),t}function h(e,t){var r=e.getContext("2d",t);if(!r)throw Error("couldn't get 2d context");return r}function d(e,t,r){if(![1,-1].includes(t)||![1,-1].includes(r)||e.width%1!=0||e.height%1!=0||Math.abs(e.angleDeg)%90!=0)return!1;var n=Math.abs(e.angleDeg-90)%180==0,i=n?e.height:e.width,o=n?e.width:e.height;return(Math.abs(i)%2==0&&e.x%1==0||Math.abs(i)%2==1&&e.x%1==.5)&&(Math.abs(o)%2==0&&e.y%1==0||Math.abs(o)%2==1&&e.y%1==.5)}function f(e,t,r,n,i){n||(n={x:0,y:0,width:t.width,height:t.height}),e.save(),i?e.imageSmoothingEnabled=!1:(e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high"),e.translate(r.x,r.y),e.rotate(r.angleDeg/180*Math.PI),e.scale(r.width>0?1:-1,r.height>0?1:-1),e.drawImage(t,n.x,n.y,n.width,n.height,-Math.abs(r.width)/2,-Math.abs(r.height)/2,Math.abs(r.width),Math.abs(r.height)),e.restore()}function p(e,t,r){(r=(0,s.copyObj)(r)).center||(r.center={x:t.width/2,y:t.height/2}),r.scale||(r.scale={x:1,y:1}),r.angleDegree||(r.angleDegree=0),r.translate||(r.translate={x:0,y:0});var n=e.getContext("2d");if(!n)throw Error("2d context not supported or canvas already initialized");n.save(),Math.abs(r.scale.x-1)>1e-6||Math.abs(r.scale.y-1)>1e-6||Math.abs(r.angleDegree%90)>1e-6?(n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high"):n.imageSmoothingEnabled=!1,n.translate(r.translate.x,r.translate.y),n.translate(r.center.x,r.center.y),n.rotate(r.angleDegree/180*Math.PI),n.scale(r.scale.x,r.scale.y),n.translate(-r.center.x,-r.center.y),n.drawImage(t,0,0,t.width,t.height),n.restore()}var g=function(e,t){var r,n=(0,a.createCanvas)();if(e<1){if(n.width=1,n.height=1,!(r=n.getContext("2d")))throw Error("2d context not supported or canvas already initialized");r.fillStyle="rgb(128, 128, 128)",r.fillRect(0,0,1,1)}else{if(n.width=2*e,n.height=2*e,!(r=n.getContext("2d")))throw Error("2d context not supported or canvas already initialized");r.fillStyle=t?"rgb(90, 90, 90)":"rgb(255, 255, 255)",r.fillRect(0,0,2*e,2*e),r.fillStyle=t?"rgb(63, 63, 63)":"rgb(200, 200, 200)",r.fillRect(0,0,e,e),r.fillRect(e,e,2*e,2*e)}return n},m=(n={},function(e,t,r){var i=r?"d":"l";function o(e){if(n[""+(e=parseInt(""+e))+i])return n[""+e+i];var t=g(e,r).toDataURL("image/png");return n[""+e+i]=t,t}if(!t)return o(e);setTimeout(function(){t(o(e))},1)});function v(e){for(var t=e.getContext("2d").getImageData(0,0,e.width,e.height),r=0;r<t.data.length;r+=4)0!==t.data[r+3]&&(t.data[r+3]=(t.data[r]+t.data[r+1]+t.data[r+2])/3*(t.data[r+3]/255));e.getContext("2d").putImageData(t,0,0)}function b(e){e.width=1,e.height=1,e.remove()}function y(e,t){var r=null!=t?t:{x1:0,y1:0,x2:e.canvas.width-1,y2:e.canvas.height-1},n=r.x2-r.x1+1,i=r.y2-r.y1+1,o=e.getImageData(r.x1,r.y1,n,i);if(o.data[3]>0&&o.data[o.data.length-1]>0)return{x:r.x1,y:r.y1,width:r.x2-r.x1+1,height:r.y2-r.y1+1};for(var a={x1:void 0,y1:void 0,x2:void 0,y2:void 0},s=3;s<o.data.length;s+=4)if(o.data[s]>0){var u=(s-3)/4%n,l=Math.floor((s-3)/4/n);(void 0===a.x1||a.x1>u)&&(a.x1=u),void 0===a.y1&&(a.y1=l),(void 0===a.x2||a.x2<u)&&(a.x2=u),(void 0===a.y2||a.y2<l)&&(a.y2=l)}if(void 0!==a.x1&&void 0!==a.y1&&void 0!==a.x2&&void 0!==a.y2)return{x:a.x1+r.x1,y:a.y1+r.y1,width:a.x2-a.x1+1,height:a.y2-a.y1+1}}function x(e,t){return(0,i._)(function(){return(0,o.__generator)(this,function(r){switch(r.label){case 0:if(!("toBlob"in HTMLCanvasElement.prototype))return[3,2];return[4,new Promise(function(r,n){e.toBlob(function(e){e?r(e):n(Error("Failed to create blob from canvas."))},t)})];case 1:return[2,r.sent()];case 2:return[2,(0,s.base64ToBlob)(e.toDataURL(t))];case 3:return[2]}})})()}function w(e,t){var r=t.canvas;t.save(),t.fillRect(0,0,r.width,r.height);var n=(0,u.getSelectionPath2d)(e);t.clip(n),t.fillStyle="white",t.fillRect(0,0,r.width,r.height),t.restore()}}),c("eelgW",function(t,r){e(t.exports,"createCanvas",function(){return n});function n(e,t){var r=document.createElement("canvas");return e&&t&&(r.width=e,r.height=t),r}}),c("9b3eo",function(t,r){e(t.exports,"getSelectionPath2d",function(){return i}),e(t.exports,"getSvgPathD",function(){return o});var n=l("bX4ja");function i(e){var t=new Path2D;return e.forEach(function(e){e.forEach(function(e){e.forEach(function(e,r){0===r?t.moveTo.apply(t,(0,n._)(e)):t.lineTo.apply(t,(0,n._)(e))})}),t.closePath()}),t}function o(e){var t="";return e.forEach(function(e){e.forEach(function(e){t+="M",e.forEach(function(e){t+=e.join(",")+" "})})}),t.trim()}}),c("bX4ja",function(t,r){e(t.exports,"_",function(){return s});var n=l("6KGpL"),i=l("5mm0I"),o=l("kD20o"),a=l("kWe4k");function s(e){return(0,n._)(e)||(0,i._)(e)||(0,a._)(e)||(0,o._)()}}),c("6KGpL",function(t,r){e(t.exports,"_",function(){return i});var n=l("gszWS");function i(e){if(Array.isArray(e))return(0,n._)(e)}}),c("5mm0I",function(t,r){e(t.exports,"_",function(){return n});function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}}),c("kD20o",function(t,r){e(t.exports,"_",function(){return n});function n(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}),c("kVHNC",function(t,r){function n(e,t){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15]]}e(t.exports,"Matrix",function(){return i});var i=Object.freeze({getIdentity:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},multiplyMatrixAndPoint:n,multiplyMatrices:function(e,t){var r=[t[0],t[1],t[2],t[3]],i=[t[4],t[5],t[6],t[7]],o=[t[8],t[9],t[10],t[11]],a=[t[12],t[13],t[14],t[15]],s=n(e,r),u=n(e,i),l=n(e,o),c=n(e,a);return[s[0],s[1],s[2],s[3],u[0],u[1],u[2],u[3],l[0],l[1],l[2],l[3],c[0],c[1],c[2],c[3]]},createTranslationMatrix:function(e,t){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]},createRotationMatrix:function(e){return[Math.cos(-e),-Math.sin(-e),0,0,Math.sin(-e),Math.cos(-e),0,0,0,0,1,0,0,0,0,1]},createScaleMatrix:function(e){return[e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]}})}),c("4toIY",function(t,r){e(t.exports,"Vec2",function(){return n});var n={add:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},sub:function(e,t){return{x:e.x-t.x,y:e.y-t.y}},nor:function(e){var t=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));return{x:e.x/t,y:e.y/t}},len:function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},dist:function(e,t){return n.len(n.sub(e,t))},mul:function(e,t){return{x:e.x*t,y:e.y*t}},angle:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},dot:function(e,t){var r=[e.x,e.y],n=[t.x,t.y];return r.map(function(e,t){return r[t]*n[t]}).reduce(function(e,t){return e+t})}}}),c("af1iA",function(t,r){e(t.exports,"projectPointOnLine",function(){return u}),e(t.exports,"PointLine",function(){return c}),e(t.exports,"BezierLine",function(){return h}),e(t.exports,"SplineInterpolator",function(){return d}),e(t.exports,"powerSplineInput",function(){return f});var n=l("cx0mh"),i=l("7h4XF"),o=l("4toIY"),a=l("eg83P"),s=l("7jh4K"),u=function(e,t,r){if(e.x===t.x)return{x:n=e.x,y:r.y};var n,i=(t.y-e.y)/(t.x-e.x),o=e.y-i*e.x;return{x:n=(i*r.y+r.x-i*o)/(i*i+1),y:(i*i*r.y+i*r.x+o)/(i*i+1)}},c=function(){"use strict";function e(t){var r=this;(0,n._)(this,e),this.segmentArr=[];for(var i=0;i<t.points.length;i++)!function(e){var n=0;e<t.points.length-1&&(n=(0,a.dist)(t.points[e].x,t.points[e].y,t.points[e+1].x,t.points[e+1].y)),r.segmentArr[e]={x:t.points[e].x,y:t.points[e].y,length:n}}(i)}return(0,i._)(e,[{key:"getAtDist",value:function(e){for(var t=Math.min(this.getLength(),e),r=0;t>this.segmentArr[r].length&&r<this.segmentArr.length-2;r++)t-=this.segmentArr[r].length;var n=Math.min(1,Math.max(0,t/this.segmentArr[r].length));return{x:this.segmentArr[r].x*(1-n)+this.segmentArr[r+1].x*n,y:this.segmentArr[r].y*(1-n)+this.segmentArr[r+1].y*n}}},{key:"getLength",value:function(){for(var e=0,t=0;t<this.segmentArr.length-1;t++)e+=this.segmentArr[t].length;return e}}]),e}(),h=function(){"use strict";function e(){(0,n._)(this,e),this.lastDot=0,this.pointArr=[]}return(0,i._)(e,[{key:"getBezierPoints",value:function(e,t,r,n,i){for(var o,a=[],s=0;s<=i;s++)o=s/i,a[a.length]={x:Math.pow(1-o,3)*e.x+3*Math.pow(1-o,2)*o*t.x+3*(1-o)*Math.pow(o,2)*r.x+Math.pow(o,3)*n.x,y:Math.pow(1-o,3)*e.y+3*Math.pow(1-o,2)*o*t.y+3*(1-o)*Math.pow(o,2)*r.y+Math.pow(o,3)*n.y};return a}},{key:"add",value:function(e,t,r,n,i){if(!this.lastPoint||e!==this.lastPoint.x||t!==this.lastPoint.y){if(this.lastPoint={x:e,y:t},this.pointArr[this.pointArr.length]={x:e,y:t,spacing:r},1===this.pointArr.length){this.lastSpacing=r;return}if(2===this.pointArr.length){this.pointArr[0].dir=o.Vec2.nor(o.Vec2.sub(this.pointArr[1],this.pointArr[0])),this.lastDot=r,this.lastSpacing=r;return}var u,l=this.pointArr[this.pointArr.length-1],h=this.pointArr[this.pointArr.length-2],d=this.pointArr[this.pointArr.length-3];h.dir=o.Vec2.nor(o.Vec2.sub(l,d)),(isNaN(h.dir.x)||isNaN(h.dir.y))&&(h.dir=(0,s.copyObj)(d.dir));for(var f=this.pointArr[this.pointArr.length-3],p=this.pointArr[this.pointArr.length-2],g=o.Vec2.add(f,o.Vec2.mul(f.dir,o.Vec2.dist(f,p)/4)),m=o.Vec2.sub(p,o.Vec2.mul(p.dir,o.Vec2.dist(f,p)/4)),v=(u=new c(n?{points:this.getBezierPoints(f,g,m,p,20)}:{points:[f,p]})).getLength(),b=(0,a.mix)(this.lastSpacing,r,(0,a.clamp)(this.lastDot/v,0,1)),y=this.lastDot;y<=v;y+=b){b=(0,a.mix)(this.lastSpacing,r,(0,a.clamp)(y/v,0,1));var x=u.getAtDist(y),w=this.lastCallbackPoint?(0,a.pointsToAngleDeg)(this.lastCallbackPoint,x):void 0;n&&n({x:x.x,y:x.y,t:y/v,angle:w,dAngle:this.lastCallbackPoint?w-this.lastAngle:0}),this.lastCallbackPoint=x,this.lastAngle=w}n?this.lastDot=y-v:(this.lastDot=0,null==i||i({p1:f,p2:g,p3:m,p4:p})),this.lastSpacing=r}}},{key:"addFinal",value:function(e,t,r){if(!(this.pointArr.length<2)){var n=this.pointArr[this.pointArr.length-2],i=this.pointArr[this.pointArr.length-1],a=o.Vec2.add(i,o.Vec2.sub(i,n));this.add(a.x,a.y,e,t,r)}}}]),e}(),d=function(){"use strict";function e(t){(0,n._)(this,e);var r,i=t.length;for(this.xa=[],this.ya=[],this.u=[],this.y2=[],this.first=t[0][0],this.last=t[t.length-1][0],t.sort(function(e,t){return e[0]-t[0]}),r=0;r<i;r++)this.xa.push(t[r][0]),this.ya.push(t[r][1]);for(r=1,this.u[0]=0,this.y2[0]=0;r<i-1;++r){var o=this.xa[r+1]-this.xa[r-1],a=(this.xa[r]-this.xa[r-1])/o,s=a*this.y2[r-1]+2;this.y2[r]=(a-1)/s;var u=(this.ya[r+1]-this.ya[r])/(this.xa[r+1]-this.xa[r])-(this.ya[r]-this.ya[r-1])/(this.xa[r]-this.xa[r-1]);this.u[r]=(6*u/o-a*this.u[r-1])/s}for(this.y2[i-1]=0,r=i-2;r>=0;--r)this.y2[r]=this.y2[r]*this.y2[r+1]+this.u[r]}return(0,i._)(e,[{key:"getFirstX",value:function(){return this.first}},{key:"getLastX",value:function(){return this.last}},{key:"interpolate",value:function(e){for(var t=this.ya.length,r=0,n=t-1;n-r>1;){var i=n+r>>1;this.xa[i]>e?n=i:r=i}var o=this.xa[n]-this.xa[r],a=(this.xa[n]-e)/o,s=(e-this.xa[r])/o;return a*this.ya[r]+s*this.ya[n]+((a*a*a-a)*this.y2[r]+(s*s*s-s)*this.y2[n])*(o*o)/6}},{key:"findX",value:function(e,t){for(var r,n,i=0;i<=t;i++){var o=i/t,a=this.interpolate(o);if(void 0===r){r=o,n=Math.abs(a-e);continue}var s=Math.abs(a-e);if(s<n)r=o,n=s;else break}return r}}]),e}();function f(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;function i(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}for(var o=[],a=0;a<=1;a+=r)o.push([i(a,4),i(e+Math.pow(a,n)*(t-e),4)]);return o}}),c("eg83P",function(t,r){function n(e,t,r){return e*(1-r)+t*r}function i(e,t,r,n){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-n,2))}function o(e,t,r,n){return Math.pow(e-r,2)+Math.pow(t-n,2)}function a(e,t){return e*e+t*t}function s(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function u(e,t){return 180*s(e,t)/Math.PI}function l(e,t){return t.x<=e.x&&e.x<=t.x+t.width&&t.y<=e.y&&e.y<=t.y+t.height}function c(e,t,r){return e<t?t:e>r?r:e}function h(e,t,r){var n=Math.PI/180*r,i=Math.cos(n),o=Math.sin(n);return{x:e*i-t*o,y:e*o+t*i}}function d(e,t,r){var n=h(t.x-e.x,t.y-e.y,r);return n.x+=e.x,n.y+=e.y,n}function f(e,t,r){var n=Math.abs(e%t);return Math.min(n,t-n)<=r&&(e=Math.round(e/t)*t),e}function p(e){return(e%=360)>180?e-=360:e<-180&&(e+=360),e}function g(e,t,r){e.x+=t,e.y+=r;var n=Math.round(e.x),i=Math.round(e.y);return e.x-=n,e.y-=i,{dX:n,dY:i}}function m(e){if(e%1==0)return e%2==0?e:e+1;var t=Math.ceil(e),r=Math.floor(e);return t%2==0?t:r}function v(e){if(e%1==0)return e%2==0?e+1:e;var t=Math.ceil(e),r=Math.floor(e);return t%2==1?t:r}function b(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function y(e,t){if(!t&&!e)throw Error("at least one param needs to be defined");return t&&(e?(e.x1=Math.min(e.x1,t.x1),e.y1=Math.min(e.y1,t.y1),e.x2=Math.max(e.x2,t.x2),e.y2=Math.max(e.y2,t.y2)):e={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),e}function x(e,t){if(e){if(!t)return e;var r=Math.max(t.x1,e.x1),n=Math.max(t.y1,e.y1),i=Math.min(t.x2,e.x2),o=Math.min(t.y2,e.y2);if(!(r>i)&&!(n>o))return{x1:r,y1:n,x2:i,y2:o}}}function w(e,t,r){if(e)return x(e,{x1:0,y1:0,x2:t-1,y2:r-1})}function A(e,t,r,n){var i=Math.max(0,Math.floor(e.x1)),o=Math.max(0,Math.floor(e.y1)),a=Math.min(t-!!n,Math.ceil(e.x2)),s=Math.min(r-!!n,Math.ceil(e.y2));if(!(i>a)&&!(o>s))return{x1:i,y1:o,x2:a,y2:s}}function S(e,t){return{x:e.x1,y:e.y1,width:e.x2-e.x1+ +!!t,height:e.y2-e.y1+ +!!t}}function E(e){return{x1:Math.floor(e.x1),y1:Math.floor(e.y1),x2:Math.ceil(e.x2),y2:Math.ceil(e.y2)}}e(t.exports,"mix",function(){return n}),e(t.exports,"dist",function(){return i}),e(t.exports,"distSquared",function(){return o}),e(t.exports,"lenSquared",function(){return a}),e(t.exports,"pointsToAngleRad",function(){return s}),e(t.exports,"pointsToAngleDeg",function(){return u}),e(t.exports,"isInsideRect",function(){return l}),e(t.exports,"clamp",function(){return c}),e(t.exports,"rotate",function(){return h}),e(t.exports,"rotateAround",function(){return d}),e(t.exports,"snapAngleDeg",function(){return f}),e(t.exports,"minimizeAngleDeg",function(){return p}),e(t.exports,"intDxy",function(){return g}),e(t.exports,"roundEven",function(){return m}),e(t.exports,"roundUneven",function(){return v}),e(t.exports,"round",function(){return b}),e(t.exports,"updateBounds",function(){return y}),e(t.exports,"boundsOverlap",function(){return x}),e(t.exports,"boundsInArea",function(){return w}),e(t.exports,"intBoundsWithinArea",function(){return A}),e(t.exports,"boundsToRect",function(){return S}),e(t.exports,"integerBounds",function(){return E})}),c("dJ1E2",function(t,r){e(t.exports,"HSV",function(){return i}),e(t.exports,"RGB",function(){return o}),e(t.exports,"CMYK",function(){return a}),e(t.exports,"ColorConverter",function(){return s}),e(t.exports,"testIsWhiteBestContrast",function(){return u});var n=l("cx0mh"),i=function e(t,r,i){"use strict";(0,n._)(this,e),this.h=Math.max(0,Math.min(360,t)),this.s=Math.max(.001,Math.min(100,r)),this.v=Math.max(0,Math.min(100,i))},o=function e(t,r,i){"use strict";(0,n._)(this,e),this.r=Math.max(0,Math.min(255,t)),this.g=Math.max(0,Math.min(255,r)),this.b=Math.max(0,Math.min(255,i))},a=function e(t,r,i,o){"use strict";(0,n._)(this,e),this.c=Math.max(0,Math.min(100,t)),this.m=Math.max(0,Math.min(100,r)),this.y=Math.max(0,Math.min(100,i)),this.k=Math.max(0,Math.min(100,o))},s={_RGBtoHSV:function(e){var t=new i(0,0,0),r=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(r,n,o),s=Math.max(r,n,o),u=s-a;if(t.v=s,0==u)t.h=0,t.s=0;else{t.s=u/s;var l=((s-r)/6+u/2)/u,c=((s-n)/6+u/2)/u,h=((s-o)/6+u/2)/u;r==s?t.h=h-c:n==s?t.h=1/3+l-h:o==s&&(t.h=2/3+c-l),t.h<0&&(t.h+=1),t.h>1&&(t.h-=1)}return t.h=Math.round(360*t.h),t.s=Math.round(100*t.s),t.v=Math.round(100*t.v),t},_HSVtoRGB:function(e){var t,r,n,i,a,s,u,l,c=new o(0,0,0),h=e.h/360%1,d=e.s/100,f=e.v/100;return 0==d?(c.r=255*f,c.g=255*f,c.b=255*f):(r=Math.floor(t=6*h),n=f*(1-d),i=f*(1-d*(t-r)),a=f*(1-d*(1-(t-r))),0==r?(s=f,u=a,l=n):1==r?(s=i,u=f,l=n):2==r?(s=n,u=f,l=a):3==r?(s=n,u=i,l=f):4==r?(s=a,u=n,l=f):(s=f,u=n,l=i),c.r=255*s,c.g=255*u,c.b=255*l,c.r=Math.round(c.r),c.g=Math.round(c.g),c.b=Math.round(c.b)),c},_CMYKtoRGB:function(e){var t=new o(0,0,0),r=e.c/100,n=e.m/100,i=e.y/100,a=e.k/100;return t.r=1-Math.min(1,r*(1-a)+a),t.g=1-Math.min(1,n*(1-a)+a),t.b=1-Math.min(1,i*(1-a)+a),t.r=Math.round(255*t.r),t.g=Math.round(255*t.g),t.b=Math.round(255*t.b),t},_RGBtoCMYK:function(e){var t=new a(0,0,0,0),r=e.r/255,n=e.g/255,i=e.b/255;return t.k=Math.min(1-r,1-n,1-i),t.c=(1-r-t.k)/(1-t.k),t.m=(1-n-t.k)/(1-t.k),t.y=(1-i-t.k)/(1-t.k),t.c=Math.round(100*t.c),t.m=Math.round(100*t.m),t.y=Math.round(100*t.y),t.k=Math.round(100*t.k),t},toRGB:function(e){if(e instanceof o)return e;if(e instanceof i)return this._HSVtoRGB(e);if(e instanceof a)return this._CMYKtoRGB(e);throw Error("unknown type")},toHSV:function(e){if(e instanceof i)return e;if(e instanceof o)return this._RGBtoHSV(e);if(e instanceof a)return this._RGBtoHSV(this._CMYKtoRGB(e));throw Error("unknown type")},toCMYK:function(e){if(e instanceof a)return e;if(e instanceof o)return this._RGBtoCMYK(e);if(e instanceof i)return this._RGBtoCMYK(this._HSVtoRGB(e));throw Error("unknown type")},toHexString:function(e){if(e instanceof o||"r"in e&&"g"in e&&"b"in e){var t=parseInt(""+e.r).toString(16),r=parseInt(""+e.g).toString(16),n=parseInt(""+e.b).toString(16);return 1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),1==n.length&&(n="0"+n),t+r+n}return"#000"},toRgbStr:function(e){return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},toRgbaStr:function(e){return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+e.a+")"},hexToRGB:function(e){e=(e=e.trim()).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,n){return t+t+r+r+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new o(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):void 0}};function u(e){return .299*e.r+.587*e.g+.114*e.b<125}}),c("i0uIf",function(t,r){e(t.exports,"BbLog",function(){return o});var n=l("cx0mh"),i=l("7h4XF"),o=function(){"use strict";function e(){(0,n._)(this,e)}return(0,i._)(e,null,[{key:"subscribe",value:function(t){e.listeners.includes(t)||e.listeners.push(t)}},{key:"unsubscribe",value:function(t){for(var r=0;r<e.listeners.length;r++)if(t===e.listeners[r])return void e.listeners.splice(r,1)}},{key:"emit",value:function(t){e.listeners.forEach(function(e){e(t)})}}]),e}();o.listeners=[]}),c("jjWRi",function(t,r){e(t.exports,"CoalescedExploder",function(){return a});var n=l("cx0mh"),i=l("7h4XF"),o=l("7jh4K"),a=function(){"use strict";function e(){(0,n._)(this,e)}return(0,i._)(e,[{key:"setChainOut",value:function(e){this.chainOut=e}},{key:"chainIn",value:function(e){if("pointermove"!==e.type||!e.coalescedArr||!(e.coalescedArr.length>0))return e;for(var t=0;t<e.coalescedArr.length;t++){var r=(0,o.copyObj)(e);0===t&&(r.coalescedArr=[]);var n=e.coalescedArr[t];r.pageX=n.pageX,r.pageY=n.pageY,r.relX=n.relX,r.relY=n.relY,r.dX=n.dX,r.dY=n.dY,r.time=n.time,r.isCoalesced=t<e.coalescedArr.length-1,this.chainOut&&this.chainOut(r)}return null}}]),e}()}),c("2pgVs",function(t,r){e(t.exports,"NFingerTapper",function(){return a});var n=l("cx0mh"),i=l("7h4XF"),o=l("eg83P"),a=function(){"use strict";function e(t){(0,n._)(this,e),this.minSilenceBeforeDurationMs=50,this.maxTapMs=500,this.maxFirstLastFingerDownMs=250,this.maxPressedDistancePx=12,this.fingerArr=[],this.eventQueueArr=[],this.firstDownTime=0,this.lastEventTime=0,this.nowTime=performance.now(),this.pointersDownIdArr=[],this.timeoutObj={firstLastDownTimeout:null,tapTimeout:null},this.fingers=t.fingers,this.onTap=t.onTap}return(0,i._)(e,[{key:"failGesture",value:function(){if(0!==this.eventQueueArr.length){this.timeoutObj.firstLastDownTimeout&&clearTimeout(this.timeoutObj.firstLastDownTimeout),this.timeoutObj.tapTimeout&&clearTimeout(this.timeoutObj.tapTimeout);for(var e=0;e<this.eventQueueArr.length;e++)this.chainOut&&this.chainOut(this.eventQueueArr[e]);this.eventQueueArr=[],this.fingerArr=[]}}},{key:"success",value:function(){this.timeoutObj.firstLastDownTimeout&&clearTimeout(this.timeoutObj.firstLastDownTimeout),this.timeoutObj.tapTimeout&&clearTimeout(this.timeoutObj.tapTimeout),this.eventQueueArr=[],this.fingerArr=[],this.onTap()}},{key:"setupTimeout",value:function(e,t){var r=this,n=t-this.nowTime;return!(n<=0)&&(this.timeoutObj[e]=setTimeout(function(){return r.failGesture()},n),!0)}},{key:"processEvent",value:function(e){var t=this.lastEventTime;if(this.lastEventTime=e.time,"pointerdown"===e.type)this.pointersDownIdArr.push(e.pointerId);else if("pointerup"===e.type){for(var r=0;r<this.pointersDownIdArr.length;r++)if(this.pointersDownIdArr[r]===e.pointerId){this.pointersDownIdArr.splice(r,1);break}}if("touch"!==e.pointerType){this.fingerArr.length>0&&this.failGesture();return}if(this.nowTime=performance.now(),"pointerdown"===e.type)return this.fingerArr.length+1!==this.pointersDownIdArr.length||this.fingerArr.length===this.fingers||this.fingerArr.length>0&&e.time-this.maxFirstLastFingerDownMs>this.fingerArr[0].downTimeMs||0===this.fingerArr.length&&e.time-this.minSilenceBeforeDurationMs<t||0===this.fingerArr.length&&(this.firstDownTime=e.time,!this.setupTimeout("firstLastDownTimeout",e.time+this.maxFirstLastFingerDownMs)||!this.setupTimeout("tapTimeout",e.time+this.maxTapMs))?void this.failGesture():void this.fingerArr.push({pointerId:e.pointerId,downTimeMs:e.time,downPageX:e.pageX,downPageY:e.pageY});if("pointermove"===e.type){if(0===this.fingerArr.length)return;for(var n=null,i=0;i<this.fingerArr.length;i++)if(this.fingerArr[i].pointerId===e.pointerId){n=this.fingerArr[i];break}if(null===n||e.time-this.maxTapMs>this.firstDownTime||(0,o.dist)(e.pageX,e.pageY,n.downPageX,n.downPageY)>this.maxPressedDistancePx)return void this.failGesture()}if("pointerup"===e.type){if(0===this.fingerArr.length)return;if(this.fingerArr.length!==this.fingers)return void this.failGesture();for(var a=null,s=0;s<this.fingerArr.length;s++)if(this.fingerArr[s].pointerId===e.pointerId){a=this.fingerArr[s];break}if(null===a)return;if(e.time-this.maxTapMs>this.firstDownTime||(0,o.dist)(e.pageX,e.pageY,a.downPageX,a.downPageY)>this.maxPressedDistancePx)return void this.failGesture();a.isUp=!0;for(var u=!0,l=0;l<this.fingerArr.length;l++)if(!this.fingerArr[l].isUp){u=!1;break}if(u)return this.success(),!0}}},{key:"chainIn",value:function(e){return!0===this.processEvent(e)?null:0===this.fingerArr.length?e:(this.eventQueueArr.push(e),null)}},{key:"setChainOut",value:function(e){this.chainOut=e}}]),e}()}),c("joplQ",function(t,r){e(t.exports,"PinchZoomer",function(){return a});var n=l("cx0mh"),i=l("7h4XF"),o=l("eg83P"),a=function(){"use strict";function e(t){(0,n._)(this,e),this.firstFingerMaxDistancePx=10,this.untilSecondFingerDurationMs=250,this.pointersDownIdArr=[],this.gestureObj=null,this.eventQueueArr=[],this.nowTime=performance.now(),this.timeoutObj={secondFingerTimeout:null},this.pincherArr=[],this.onPinch=t.onPinch}return(0,i._)(e,[{key:"end",value:function(){this.gestureObj=null,this.eventQueueArr=[]}},{key:"fail",value:function(e){if(this.gestureObj){if(this.timeoutObj.secondFingerTimeout&&clearTimeout(this.timeoutObj.secondFingerTimeout),!e)for(var t=0;t<this.eventQueueArr.length;t++)this.chainOut&&this.chainOut(this.eventQueueArr[t]);this.end()}}},{key:"setupFailTimeout",value:function(e){var t=this,r=e-this.nowTime;return!(r<=0)&&(this.timeoutObj.secondFingerTimeout=setTimeout(function(){return t.fail()},r),!0)}},{key:"processEvent",value:function(e){if("pointerdown"===e.type)this.pointersDownIdArr.push(e.pointerId);else if("pointerup"===e.type){for(var t=0;t<this.pointersDownIdArr.length;t++)if(this.pointersDownIdArr[t]===e.pointerId){this.pointersDownIdArr.splice(t,1);break}}if(this.gestureObj||"touch"===e.pointerType&&("pointermove"!==e.type||!(this.pointersDownIdArr.length>0))&&!(this.pointersDownIdArr.length>1)&&"pointerup"!==e.type){if(this.nowTime=performance.now(),"pointerdown"===e.type)if(!this.gestureObj)return(this.gestureObj={touchPointerArr:[{pointerId:e.pointerId,relX:e.relX,relY:e.relY,downRelX:e.relX,downRelY:e.relY}],otherPointerIdArr:[],isInProgress:!1},this.setupFailTimeout(e.time+this.untilSecondFingerDurationMs))?void 0:void this.fail();else{if("touch"!==e.pointerType)return void(this.gestureObj.isInProgress?this.gestureObj.otherPointerIdArr.push(e.pointerId):this.fail());this.gestureObj.touchPointerArr.push({pointerId:e.pointerId,relX:e.relX,relY:e.relY}),this.gestureObj.isInProgress?this.continuePinch(this.gestureObj,{type:"down",index:this.gestureObj.touchPointerArr.length-1}):(this.timeoutObj.secondFingerTimeout&&clearTimeout(this.timeoutObj.secondFingerTimeout),this.gestureObj.isInProgress=!0,this.beginPinch(this.gestureObj));return}if(!this.gestureObj)return void this.fail();if("pointermove"===e.type&&"touch"===e.pointerType){for(var r=null,n=0;n<this.gestureObj.touchPointerArr.length;n++)if(e.pointerId===this.gestureObj.touchPointerArr[n].pointerId){r=this.gestureObj.touchPointerArr[n];break}if(!r)return void this.fail();if(r.relX=e.relX,r.relY=e.relY,this.gestureObj.isInProgress)n<2&&this.continuePinch(this.gestureObj,{type:"move",index:n});else if(!("downRelX"in r&&void 0!==r.downRelX)||!("downRelY"in r&&void 0!==r.downRelY)||(0,o.dist)(r.downRelX,r.downRelY,r.relX,r.relY)>this.firstFingerMaxDistancePx)return void this.fail();return}if("pointerup"===e.type){if("touch"===e.pointerType){for(var i=0;i<this.gestureObj.touchPointerArr.length;i++)if(this.gestureObj.touchPointerArr[i].pointerId===e.pointerId){this.gestureObj.touchPointerArr.splice(i,1);break}this.gestureObj.touchPointerArr.length>0&&this.continuePinch(this.gestureObj,{type:"up",index:i})}else for(var a=0;a<this.gestureObj.otherPointerIdArr.length;a++)if(this.gestureObj.otherPointerIdArr[a]===e.pointerId){this.gestureObj.otherPointerIdArr.splice(a,1);break}if(0===this.gestureObj.touchPointerArr.length&&0===this.gestureObj.otherPointerIdArr.length)return void(this.gestureObj.isInProgress?(this.end(),this.endPinch()):this.fail())}}}},{key:"beginPinch",value:function(e){for(var t=0;t<e.touchPointerArr.length;t++){var r=e.touchPointerArr[t];this.pincherArr.push({pointerId:r.pointerId,relX:r.relX,relY:r.relY,downRelX:r.relX,downRelY:r.relY})}var n={type:"move",downRelX:0,downRelY:0,relX:0,relY:0,angleRad:0,scale:1};1===this.pincherArr.length?(n.relX=this.pincherArr[0].downRelX,n.relY=this.pincherArr[0].downRelY):(n.relX=.5*(this.pincherArr[0].downRelX+this.pincherArr[1].downRelX),n.relY=.5*(this.pincherArr[0].downRelY+this.pincherArr[1].downRelY)),n.downRelX=n.relX,n.downRelY=n.relY,this.onPinch(n)}},{key:"continuePinch",value:function(e,t){if(!(t.index>1))if("move"===t.type){var r;if(this.pincherArr[t.index].relX=e.touchPointerArr[t.index].relX,this.pincherArr[t.index].relY=e.touchPointerArr[t.index].relY,1===this.pincherArr.length)r={type:"move",downRelX:this.pincherArr[0].downRelX,downRelY:this.pincherArr[0].downRelY,relX:this.pincherArr[0].relX,relY:this.pincherArr[0].relY,angleRad:0,scale:1};else{var n=(0,o.dist)(this.pincherArr[0].downRelX,this.pincherArr[0].downRelY,this.pincherArr[1].downRelX,this.pincherArr[1].downRelY),i=(0,o.dist)(this.pincherArr[0].relX,this.pincherArr[0].relY,this.pincherArr[1].relX,this.pincherArr[1].relY),a=(0,o.pointsToAngleRad)({x:this.pincherArr[0].downRelX,y:this.pincherArr[0].downRelY},{x:this.pincherArr[1].downRelX,y:this.pincherArr[1].downRelY}),s=(0,o.pointsToAngleRad)({x:this.pincherArr[0].relX,y:this.pincherArr[0].relY},{x:this.pincherArr[1].relX,y:this.pincherArr[1].relY});r={type:"move",downRelX:.5*(this.pincherArr[0].downRelX+this.pincherArr[1].downRelX),downRelY:.5*(this.pincherArr[0].downRelY+this.pincherArr[1].downRelY),relX:.5*(this.pincherArr[0].relX+this.pincherArr[1].relX),relY:.5*(this.pincherArr[0].relY+this.pincherArr[1].relY),angleRad:s-a,scale:i/n}}this.onPinch(r)}else("down"===t.type||"up"===t.type)&&(this.endPinch(),this.beginPinch(e))}},{key:"endPinch",value:function(){this.pincherArr=[],this.onPinch({type:"end"})}},{key:"chainIn",value:function(e){return(this.processEvent(e),this.gestureObj)?(this.gestureObj.isInProgress||this.eventQueueArr.push(e),null):e}},{key:"setChainOut",value:function(e){this.chainOut=e}}]),e}()}),c("c1lmK",function(t,r){e(t.exports,"DoubleTapper",function(){return s});var n=l("cx0mh"),i=l("7h4XF"),o=l("bX4ja"),a=l("eg83P"),s=function(){"use strict";function e(t){var r=this;(0,n._)(this,e),this.allowedPointerTypeArr=["touch","mouse","pen"],this.allowedButtonArr=["left"],this.minSilenceBeforeDurationMs=400,this.maxPressedDurationMs=300,this.maxPressedDistancePx=10,this.maxInbetweenDistancePx=19,this.maxUpToUpDurationMs=500,this.maxUntilSecondDownDurationMs=300,this.minSilenceAfterMs=250,this.sequenceArr=[],this.pointersDownIdArr=[],this.lastUpTime=0,this.nowTime=0,this.eventQueueArr=[],this.timeoutObj={fail:null,maxUntilSecondDown:null,success:null},this.onDoubleTap=t.onDoubleTap,t.isInstant&&(this.minSilenceBeforeDurationMs=0,this.minSilenceAfterMs=0),this.gestureFailed=function(){if(0!==r.sequenceArr.length){if(r.timeoutObj.fail&&clearTimeout(r.timeoutObj.fail),r.timeoutObj.maxUntilSecondDown&&clearTimeout(r.timeoutObj.maxUntilSecondDown),r.timeoutObj.success&&clearTimeout(r.timeoutObj.success),r.timeoutObj.fail=null,r.timeoutObj.maxUntilSecondDown=null,r.timeoutObj.success=null,r.chainOut)for(var e=0;e<r.eventQueueArr.length;e++)r.chainOut(r.eventQueueArr[e]);r.eventQueueArr=[],r.sequenceArr=[]}}}return(0,i._)(e,[{key:"success",value:function(){this.timeoutObj.fail=null,this.timeoutObj.success=null,this.eventQueueArr=[];var e=this.sequenceArr[this.sequenceArr.length-1];this.sequenceArr=[],"pageX"in e&&this.onDoubleTap({pageX:e.pageX,pageY:e.pageY,relX:e.relX,relY:e.relY})}},{key:"setupTimeout",value:function(e,t,r,n){var i=r-this.nowTime;return(!(i<=0)||!!n)&&(this.timeoutObj[e]=setTimeout(t,Math.max(0,i)),!0)}},{key:"processEvent",value:function(e){var t=this;if("pointerdown"===e.type)this.pointersDownIdArr.push(e.pointerId);else if("pointerup"===e.type){for(var r=0;r<this.pointersDownIdArr.length;r++)if(this.pointersDownIdArr[r]===e.pointerId){this.pointersDownIdArr.splice(r,1);break}}if(!this.allowedPointerTypeArr.includes(e.pointerType))return void this.gestureFailed();this.nowTime=performance.now();var n=this.sequenceArr.length>0?this.sequenceArr[this.sequenceArr.length-1]:null;if("pointerup"===e.type&&(this.lastUpTime=e.time),"pointerdown"===e.type){if(this.pointersDownIdArr.length>1||null!==this.timeoutObj.success||0===this.sequenceArr.length&&this.nowTime-this.lastUpTime<this.minSilenceBeforeDurationMs||e.button&&!this.allowedButtonArr.includes(e.button)||n&&"isDown"in n&&n.isDown||this.sequenceArr.length>2)return void this.gestureFailed();if(n&&"position"in n&&(0,a.dist)(n.position[0],n.position[1],e.pageX,e.pageY)>this.maxInbetweenDistancePx&&(this.gestureFailed(),"time"in n&&this.nowTime-n.time<this.minSilenceBeforeDurationMs))return;if(this.sequenceArr.push({isDown:!0,time:this.nowTime,position:[e.pageX,e.pageY],pointerId:e.pointerId}),this.sequenceArr.length>1)this.timeoutObj.maxUntilSecondDown&&clearTimeout(this.timeoutObj.maxUntilSecondDown);else if(!this.setupTimeout("maxUntilSecondDown",function(){return t.gestureFailed()},e.time+this.maxUntilSecondDownDurationMs))return void this.gestureFailed();if(this.timeoutObj.fail&&clearTimeout(this.timeoutObj.fail),!this.setupTimeout("fail",function(){return t.gestureFailed()},e.time+this.maxPressedDurationMs))return void this.gestureFailed()}if(n&&"pointermove"===e.type&&"pointerId"in n&&n.pointerId===e.pointerId&&(0,a.dist)(n.position[0],n.position[1],e.pageX,e.pageY)>this.maxPressedDistancePx)return void this.gestureFailed();if(n&&"pointerup"===e.type){if("pointerId"in n&&n.pointerId!==e.pointerId||"time"in n&&this.nowTime>=n.time+this.maxPressedDurationMs)return void this.gestureFailed();if(this.timeoutObj.fail&&clearTimeout(this.timeoutObj.fail),this.sequenceArr.length<3)return this.setupTimeout("fail",function(){return t.gestureFailed()},e.time+this.maxUpToUpDurationMs)?void(this.sequenceArr=[n,{isUp:!0,time:this.nowTime,position:[e.pageX,e.pageY]}]):void this.gestureFailed();"time"in this.sequenceArr[1]&&this.nowTime<this.sequenceArr[1].time+this.maxUpToUpDurationMs?(this.sequenceArr.push({pageX:e.pageX,pageY:e.pageY,relX:e.relX,relY:e.relY}),this.setupTimeout("success",function(){return t.success()},e.time+this.minSilenceAfterMs,!0)||this.gestureFailed()):this.gestureFailed()}}},{key:"chainIn",value:function(e){return(this.processEvent(e),0===this.sequenceArr.length)?(this.gestureFailed(),e):(this.eventQueueArr.push(e),null)}},{key:"setChainOut",value:function(e){this.chainOut=e}},{key:"setAllowedPointerTypeArr",value:function(e){this.allowedPointerTypeArr=(0,o._)(e)}},{key:"setAllowedButtonArr",value:function(e){this.allowedButtonArr=(0,o._)(e)}}]),e}()}),c("635F6",function(t,r){e(t.exports,"OnePointerLimiter",function(){return o});var n=l("cx0mh"),i=l("7h4XF"),o=function(){"use strict";function e(){(0,n._)(this,e),this.downPointerId=null,this.ignorePointerIdArr=[]}return(0,i._)(e,[{key:"chainIn",value:function(e){if(this.ignorePointerIdArr.includes(e.pointerId)){if("pointerup"===e.type){for(var t=0;t<this.ignorePointerIdArr.length;t++)if(this.ignorePointerIdArr[t]===e.pointerId){this.ignorePointerIdArr.splice(t,1);break}}return null}return null===this.downPointerId?("pointerdown"===e.type&&(this.downPointerId=e.pointerId),e):e.pointerId!==this.downPointerId?("pointerdown"===e.type&&this.ignorePointerIdArr.push(e.pointerId),null):("pointerup"===e.type&&(this.downPointerId=null),e)}},{key:"setChainOut",value:function(e){this.chainOut=e}}]),e}()}),c("gCzYB",function(t,r){e(t.exports,"EventChain",function(){return o});var n=l("cx0mh"),i=l("7h4XF"),o=function(){"use strict";function e(t){var r=this;(0,n._)(this,e),this.chainArr=t.chainArr;for(var i=0;i<this.chainArr.length;i++)!function(e){r.chainArr[e].setChainOut(function(t){r.continueChain(e+1,t)})}(i)}return(0,i._)(e,[{key:"continueChain",value:function(e,t){for(;e<this.chainArr.length;e++)if(null===(t=this.chainArr[e].chainIn(t)))return null;return this.chainOut&&this.chainOut(t),null}},{key:"chainIn",value:function(e){return this.continueChain(0,e)}},{key:"setChainOut",value:function(e){this.chainOut=e}}]),e}()}),c("ar0Oi",function(e,r){e.exports=Promise.all([l("i5Beu")(t("bIDbX")),l("ih7W4")(t("dafOa"))]).then(function(){return l("6NgYC")})}),c("i5Beu",function(e,t){"use strict";e.exports=l("5Y6Bl")(function(e){return new Promise(function(t,r){if("undefined"==typeof document)return t();var n=document.createElement("link");(n.rel="stylesheet",n.href=e,Array.from(document.getElementsByTagName("link")).some(function(e){return e.href===n.href&&e.rel.indexOf("stylesheet")>-1}))?t():(n.onerror=function(e){n.onerror=n.onload=null,n.remove(),r(e)},n.onload=function(){n.onerror=n.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(n))})})}),c("gcVy2",function(e,r){e.exports=l("i5Beu")(t("4GTbM"))}),Object.assign(l.i??={},{eHdqz:"klecks-logo.ae8bd45e.png","5RGAp":"de.9af5c274.js","3uTpJ":"es.ba06aaff.js","4XbAZ":"fi.7629ab8b.js","2bKIP":"fr.8783c9d5.js",i0BNf:"hu.89de6ca3.js","98Cvg":"id.05cc6376.js",y5edP:"ja.0e606fe2.js","9fDFY":"jv.c2e22eb2.js",cW2nR:"ko.d8e6b1c3.js","8ucza":"lv.ee5d3af5.js",f3RKT:"nl.1402c478.js",fVlhe:"pt-BR.988d347f.js",kcBSP:"ru.4e97c337.js","4RByM":"su.2f297e13.js",ap9yw:"sv.2e7effd2.js",dsJ3g:"zh-CN.dac2191e.js",lF1Tu:"zh-TW.71abe7bc.js",kNYzr:"dist.e4d721e1.js",dafOa:"main-embed.b6d80eb0.js",kbyFQ:"cancel.340fb0bb.svg",l7FYj:"check.e6114d75.svg",kino6:"remove-layer.da17ce5a.svg","5H9IS":"brush-pressure.8782e24b.svg",la7yv:"copy.22819386.svg",cTtMO:"tool-picker.896489f2.svg",iQ1f0:"angle.319ede69.svg","04ZZm":"tool-zoom-in.a322442c.svg",j9xio:"tool-zoom-out.a0c9b082.svg",fER1z:"viewport-reset.f69c6fbc.svg","2gZH2":"tool-hand.b64de96e.svg",ghFv7:"edit-pencil.070f95f1.svg",cazOx:"edit-crop.5a25544f.svg","1mb1v":"add-layer.ec19e714.svg","11KJK":"duplicate-layer.fd421984.svg",floUo:"merge-layers.ec5eab67.svg",hhQeq:"rename-layer.a037b591.svg",dz3mY:"caret-down.5e676c46.svg",iPQe1:"merge-moved.161569b7.png","045N6":"cursor-rotate.0c8e34b1.png","3x5dR":"new-image.1891be3f.svg",hbDTd:"import.eacba42d.svg","16iGk":"export.15a4d72c.svg","2ME3z":"share.ab903904.svg",hZnSk:"help.648f7d00.svg","6mHrC":"tool-paint.1b2f44ed.svg",hS5Hj:"tool-fill.bbd4ae51.svg","4KGfM":"tool-gradient.dedc893d.svg",doX4v:"tool-text.0da9f984.svg","7NqHO":"tool-shape.522cd4b5.svg",kOuYd:"tool-select.5ec1da7d.svg",AnO0a:"tool-undo.9138898d.svg","6toXQ":"edit-rotate.8fb5b1ef.svg",b1UMP:"ui-collapse.da4b78fc.svg",lvwQ5:"align-left.dd4a3407.svg",imAvm:"align-center.13c1a9ae.svg",dC0sF:"align-right.20a4fe41.svg",h3hPo:"typo-italic.010c7282.svg","1pAeY":"typo-bold.e186ac23.svg",hapKl:"Caveat-Regular.2fe80bbd.woff2",dqzux:"ClimateCrisis-Regular-VariableFont_YEAR.3ad02523.woff2",l7VGL:"CorrectionBrush.a69973aa.woff2",dm0T7:"DancingScript-Regular.ef2fe647.woff2","2U3dq":"Diabolik-Regular-VF.f4eeb79e.woff2",axzlU:"FreckleFace-Regular.05946539.woff2",avgh6:"Gloock-Regular.60f8f765.woff2",H9bSu:"Pacha.08c8457a.woff2",emBfm:"GochiHand-Regular.c45792b0.woff2",kjRvm:"PassionOne-Bold.9e08b0dc.woff2",c79R0:"PixeloidSans.bc292131.woff2",fndWQ:"PlaypenSans-Thin.314b29a4.woff2",iAFmc:"Quicksand-Light.1f0c44a2.woff2","2Bq6W":"Silkscreen-Regular.cef2b4cb.woff2",hmfbp:"Tehroc-Regular.4540047b.woff2",iItsG:"YUNGA-Display.30c04a15.woff2","5tPq3":"edit-brightness-contrast.78620665.svg","245NA":"edit-curves.56e09e16.svg","1hkCG":"edit-flip.8010ad0f.svg",k2eFf:"edit-hue-saturation.373aa41d.svg",krKGd:"edit-invert.91bfa402.png",ehfxY:"edit-perspective.474c436b.svg",beOjS:"edit-resize.673fffa7.svg",Gk9bV:"edit-tilt-shift.7ad164eb.png",csed7:"edit-to-alpha.10878d74.svg",equSE:"edit-transform.56e34528.svg",h1dN3:"edit-triangle-blur.17417e43.png",LfAXI:"edit-unsharp-mask.38afa514.png",cB6q6:"edit-grid.c20f8e5f.svg",S9ano:"edit-noise.20c18f19.svg","4eqRj":"edit-pattern.f6d27c58.svg","8mvSV":"edit-vanish-point.a8c2dde8.svg",kbc0v:"edit-distort.33c9d58d.svg",iiCd6:"brush-pen.c04fbc65.svg","6fRlX":"brush-blend.d8ce5270.svg",hC7PC:"brush-sketchy.6c75169d.png",eZgVv:"brush-pixel.bfd351cf.svg",fPZin:"brush-eraser.388bfa8c.svg",fp7H1:"brush-smudge.9c9edfb1.svg",eX098:"brush-chemy.a5a188f6.svg","2oHM2":"upload.fb4a8f36.svg",iGeXe:"loading.7ff8a2ac.gif",kSWIa:"bitbof-logo.738252a6.svg","4FMUg":"ui-swap-lr.695f74b3.svg","62mlz":"licenses.fc8627f9.js","76QQo":"font-licenses.0e2c26a4.js","2BZYe":"constrain.46a31747.svg",k9Nks:"tab-settings.980aa34c.svg",bBxqy:"tab-layers.e4748a75.svg","3UXKl":"tab-edit.0d1e8b85.svg","1dLwT":"cursor-picker.71be1460.png",hQSEH:"cursor-fill.ab749dde.png","916ZI":"cursor-text.b4ebf6cd.png","9wZxU":"cursor-zoom-ew.d3ab2d60.png",kiEfz:"select-mode-select.46ceb4fe.svg","4uXfZ":"select-mode-move.321505b0.svg",bjhUB:"select-default.a4d71ff2.svg","9MYhm":"select-union.add41cd9.svg",fsl8L:"select-subtract.a2c61ba8.svg","3QHUd":"select-shape-rect.ecb1b83c.svg","5GkZe":"select-shape-ellipse.42a3a2f0.svg","2zM6R":"select-shape-lasso.3dedd955.svg","5rTlv":"select-shape-poly.25fd4f29.svg",bIDbX:"main-embed.647002b3.css","4GTbM":"embed.3ca9f2f9.css",eW5wL:"caret-down.5e676c46.svg","9clYo":"error.0d506571.svg",bLSjr:"ok.db60f162.svg","8eSFI":"warning.245b9b7a.svg",d56Qw:"upload-large.19c94192.svg"});var h=l("1LaJZ"),d=l("cx0mh"),f=l("7h4XF"),p=l("cL71g"),g=l("4EWN2"),m=l("2gUX3"),v=l("ci8rB"),b=l("1mH1z"),y=l("1C8RU"),x=l("iVf04"),w=l("7jh4K"),A=l("72Jv0"),S=!1;function E(e){e&&e.layers.forEach(function(e){e.isVisible=void 0===e.isVisible||e.isVisible})}var _=function(){"use strict";function e(t){if((0,d._)(this,e),this.psds=[],this.getPNG=void 0,this.getPSD=void 0,this.setBrushSize=void 0,this.getBrushSize=void 0,this.setBrushOpacity=void 0,this.getBrushOpacity=void 0,this.setBrushColor=void 0,this.getBrushColor=void 0,this.setBrushScatter=void 0,this.draw=void 0,this.clearLayer=void 0,this.getColor=void 0,this.hideToolSpace=void 0,S)throw Error("Already created an embed");S=!0,E(t.project),t=(0,g._)((0,p._)({},t),{embedUrl:t.embedUrl?t.embedUrl:function(){if(i)return i;try{throw Error()}catch(t){t instanceof Error&&(e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g))}var e,t=0;return e.forEach(function(e,r){-1!==e.indexOf("embed.js")&&(t=r)}),i=(""+e[t]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}()}),(0,h._)(function(){var e,n,i,o,a;return(0,m.__generator)(this,function(s){switch(s.label){case 0:return e=this,[4,(0,b.initLANG)()];case 1:for(s.sent(),n=document.createElement("div"),i=[["position","fixed"],["left","0"],["top","0"],["width","100vw"],["height","100vh"],["display","flex"],["alignItems","center"],["justifyContent","center"],["flexDirection","column"],["background",y.THEME.isDark()?"rgb(33, 33, 33)":"rgb(158,158,158)"],["fontFamily","system-ui, sans-serif"],["fontSize","30px"],["color","#e3e3e3"]],o=0;o<i.length;o++)n.style[i[o][0]]=i[o][1];return n.id="loading-screen",n.append((0,A.createImage)({width:150,height:54,alt:"Logo",src:t.logoImg?t.logoImg:r(v),css:{filter:y.THEME.isDark()&&!t.logoImg?"invert(1)":void 0}})),n.innerHTML+='<div style="margin: 15px 0 0 0; display: flex; align-items: center">\n<div class="spinner"></div>\n<span id="loading-screen-text">'+(0,b.LANG)("embed-init-loading")+"</span></div>",document.body.appendChild(n),[4,l("ar0Oi")];case 2:return a=s.sent(),this.instance=new a.Embed(t),this.getPNG=function(){return e.instance.getPNG()},this.getPSD=function(){return e.instance.getPSD()},this.setBrushSize=function(t){return e.instance.setBrushSize(t)},this.getBrushSize=function(){return e.instance.getBrushSize()},this.setBrushOpacity=function(t){return e.instance.setBrushOpacity(t)},this.getBrushOpacity=function(){return e.instance.getBrushOpacity()},this.setBrushColor=function(t){return e.instance.setBrushColor(t)},this.getBrushColor=function(){return e.instance.getBrushColor()},this.setBrushScatter=function(t){return e.instance.setBrushScatter(t)},this.draw=function(t){return e.instance.draw(t)},this.clearLayer=function(){return e.instance.clearLayer()},this.getColor=function(){return e.instance.getColor()},this.hideToolSpace=function(){return e.instance.hideToolSpace()},this.project&&this.instance.openProject(this.project),this.errorStr&&this.instance.initError(this.errorStr),this.psds.length&&this.instance.readPSDs(this.psds),this.setupPostMessageListener(),[2]}})}).call(this),(0,x.loadAgPsd)()}return(0,f._)(e,[{key:"setupPostMessageListener",value:function(){var e=this;window.addEventListener("message",function(t){if(t.data&&"object"==typeof t.data){if("setBrushSize"===t.data.type&&"number"==typeof t.data.size){if(e.setBrushSize)try{e.setBrushSize(t.data.size)}catch(e){console.error("Failed to set brush size:",e)}}else if("getBrushSize"===t.data.type&&e.getBrushSize&&t.source)try{var r=e.getBrushSize();t.source.postMessage({type:"brushSize",size:r},t.origin)}catch(e){console.error("Failed to get brush size:",e),t.source&&t.source.postMessage({type:"brushSizeError",error:String(e)},t.origin)}}})}},{key:"openProject",value:function(e){var t,r=(0,g._)((0,p._)({},e),{projectId:null!=(t=e.projectId)?t:(0,w.randomUuid)()});if(E(r),this.instance)this.instance.openProject(r);else{if(this.project)throw Error("Already called openProject");this.project=r}}},{key:"initError",value:function(e){this.instance?this.instance.initError(e):this.errorStr=e}},{key:"readPSD",value:function(e){return(0,h._)(function(){var t;return(0,m.__generator)(this,function(r){return t=this,[2,new Promise(function(r,n){var i={blob:e,callback:function(e){t.psds.splice(t.psds.indexOf(i),1),e?r(e):n()}};t.instance?t.instance.readPSDs([i]):t.psds.push(i)})]})}).call(this)}}]),e}();l("gcVy2"),Object.defineProperty(window,"Klecks",{value:_})}();
//# sourceMappingURL=embed.js.map
